<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/config/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/config/favicon-16x16.png">
  <link rel="mask-icon" href="/assets/config/logo-loki.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,400,400italic,700,700italic%7CNoto+Sans+TC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"summer10920.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":20,"offset":20},"hljswrap":true,"copycode":{"enable":true,"style":"mac"},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeIn","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜尋...","empty":"我們無法找到任何有關 ${query} 的搜索結果","hits_time":"${hits} 找到 ${time} 個結果","hits":"找到 ${hits} 個結果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Node.js 是能夠在伺服器上面運行 JavaScript 的應用平台環境，透過 Node.js 提供的函式庫與執行環境能完成伺服器端服務，提供各種網路應用。本篇資源版本與環境如下：  主題教材： Node.js 官方網站 版本 v14.15.3 NVM 版本 v0.37.2 NVM-windows 版本 v1.1.7   IDE 編譯器：VScode v1.52.1 作業系統：Windows">
<meta property="og:type" content="article">
<meta property="og:title" content="[學習之路] Node.js 入門教學">
<meta property="og:url" content="http://summer10920.github.io/2020/12-30/article-nodejs/">
<meta property="og:site_name" content="洛奇的邪惡組織手札">
<meta property="og:description" content="Node.js 是能夠在伺服器上面運行 JavaScript 的應用平台環境，透過 Node.js 提供的函式庫與執行環境能完成伺服器端服務，提供各種網路應用。本篇資源版本與環境如下：  主題教材： Node.js 官方網站 版本 v14.15.3 NVM 版本 v0.37.2 NVM-windows 版本 v1.1.7   IDE 編譯器：VScode v1.52.1 作業系統：Windows">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://i.imgur.com/vPPrZA3.png">
<meta property="og:image" content="https://i.imgur.com/1avqpDq.png">
<meta property="og:image" content="https://i.imgur.com/ICEs9yo.png">
<meta property="og:image" content="https://i.imgur.com/omVygPq.png">
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/5/53/Router-MVC-DB.svg">
<meta property="og:image" content="https://i.imgur.com/jN6BO0j.png">
<meta property="og:image" content="https://i.imgur.com/JsnCLNK.png">
<meta property="og:image" content="https://i.imgur.com/7bqBjkB.png">
<meta property="article:published_time" content="2020-12-30T04:47:03.000Z">
<meta property="article:modified_time" content="2024-08-22T02:31:12.204Z">
<meta property="article:author" content="Loki Jiang">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="NodeJS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/vPPrZA3.png">


<link rel="canonical" href="http://summer10920.github.io/2020/12-30/article-nodejs/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-TW","comments":true,"permalink":"http://summer10920.github.io/2020/12-30/article-nodejs/","path":"2020/12-30/article-nodejs/","title":"[學習之路] Node.js 入門教學"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>[學習之路] Node.js 入門教學 | 洛奇的邪惡組織手札</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146423952-3"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-146423952-3","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>







<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&family=Roboto&display=swap" rel="stylesheet">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <canvas id="lokiBanner" width="1920" height="200"></canvas>
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">洛奇的邪惡組織手札</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">I am WebDeveloper!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜尋" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤<span class="badge">20</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類<span class="badge">17</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔<span class="badge">68</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜尋..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AA%8D%E8%AD%98"><span class="nav-number">1.</span> <span class="nav-text">認識</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%9D"><span class="nav-number">2.</span> <span class="nav-text">安裝</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%98%E7%B6%B2%E4%B8%8B%E8%BC%89"><span class="nav-number">2.1.</span> <span class="nav-text">官網下載</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NVM-%E5%B7%A5%E5%85%B7"><span class="nav-number">2.2.</span> <span class="nav-text">NVM 工具</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#USB-%E5%85%8D%E5%AE%89%E8%A3%9D"><span class="nav-number">2.3.</span> <span class="nav-text">USB 免安裝</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#VSCode-%E7%9A%84%E5%85%8D%E5%AE%89%E8%A3%9D"><span class="nav-number">2.3.1.</span> <span class="nav-text">VSCode 的免安裝</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GIT-%E7%9A%84%E5%85%8D%E5%AE%89%E8%A3%9D"><span class="nav-number">2.3.2.</span> <span class="nav-text">GIT 的免安裝</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Node-%E7%9A%84%E5%85%8D%E5%AE%89%E8%A3%9D-%EF%BC%88%E5%85%A9%E7%A8%AE%E6%96%B9%E5%BC%8F%EF%BC%89"><span class="nav-number">2.3.3.</span> <span class="nav-text">Node 的免安裝 （兩種方式）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A7%BB%E6%A4%8D%E8%88%8A-npm-%E6%A8%A1%E7%B5%84"><span class="nav-number">2.3.3.1.</span> <span class="nav-text">移植舊 npm 模組</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%93-VScode-%E7%B5%82%E7%AB%AF%E6%A9%9F%E8%87%AA%E5%8B%95%E5%9F%B7%E8%A1%8C-GIT-%E8%88%87-Node"><span class="nav-number">2.3.4.</span> <span class="nav-text">讓 VScode 終端機自動執行 GIT 與 Node</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%A5%E9%96%80%E6%93%8D%E4%BD%9C"><span class="nav-number">3.</span> <span class="nav-text">入門操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#process-%E7%89%A9%E4%BB%B6"><span class="nav-number">3.1.</span> <span class="nav-text">process 物件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#exit-%E4%B8%AD%E6%96%B7%E6%93%8D%E4%BD%9C"><span class="nav-number">3.1.1.</span> <span class="nav-text">exit 中斷操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nextTick-%E6%8C%87%E5%AE%9A%E4%B8%8B%E6%AC%A1%E5%9F%B7%E8%A1%8C"><span class="nav-number">3.1.2.</span> <span class="nav-text">nextTick 指定下次執行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A8%E5%9F%9F%E8%AE%8A%E6%95%B8"><span class="nav-number">3.2.</span> <span class="nav-text">全域變數</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Moudles-%E6%A8%A1%E7%B5%84"><span class="nav-number">4.</span> <span class="nav-text">Moudles 模組</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Third-Party-Modules-%EF%BC%88%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E7%B5%84%EF%BC%89"><span class="nav-number">4.1.</span> <span class="nav-text">Third Party Modules （第三方模組）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%9F%9F%E5%AE%89%E8%A3%9D-vs-%E5%8D%80%E5%9F%9F%E5%AE%89%E8%A3%9D"><span class="nav-number">4.1.1.</span> <span class="nav-text">全域安裝 vs 區域安裝</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Global-Install-%E5%85%A8%E5%9F%9F%E5%AE%89%E8%A3%9D"><span class="nav-number">4.1.1.1.</span> <span class="nav-text">Global Install 全域安裝</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Local-Install-%E5%8D%80%E5%9F%9F%E5%AE%89%E8%A3%9D"><span class="nav-number">4.1.1.2.</span> <span class="nav-text">Local Install 區域安裝</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#npm-%E5%85%B6%E4%BB%96%E6%8C%87%E4%BB%A4"><span class="nav-number">4.1.2.</span> <span class="nav-text">npm 其他指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Local-Modules%EF%BC%88%E8%87%AA%E5%BB%BA%E6%A8%A1%E7%B5%84%EF%BC%89"><span class="nav-number">4.2.</span> <span class="nav-text">Local Modules（自建模組）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8B%95%E7%9A%84%E8%87%AA%E5%BB%BA%E6%A8%A1%E7%B5%84"><span class="nav-number">4.2.1.</span> <span class="nav-text">手動的自建模組</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A2%E7%94%9F-resport-%E5%9B%9E%E5%82%B3"><span class="nav-number">4.2.1.1.</span> <span class="nav-text">產生 resport 回傳</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E5%B0%87-exports-%E7%95%B6%E4%BD%9C%E7%89%A9%E4%BB%B6%EF%BC%8C%E6%8C%87%E5%AE%9A%E4%B8%89%E7%A8%AE%E5%90%8D%E7%A8%B1%E5%87%BD%E5%BC%8F"><span class="nav-number">4.2.1.1.1.</span> <span class="nav-text">方法一：將 exports 當作物件，指定三種名稱函式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A%E5%B0%87%E5%AE%8C%E6%95%B4%E7%9A%84%E7%89%A9%E4%BB%B6%E6%8C%87%E5%AE%9A%E7%B5%A6-export"><span class="nav-number">4.2.1.1.2.</span> <span class="nav-text">方法二：將完整的物件指定給 export</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%99%BC%E5%87%BA-request-%E5%8F%96%E5%BE%97%E7%B5%90%E6%9E%9C"><span class="nav-number">4.2.1.2.</span> <span class="nav-text">發出 request 取得結果</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%B7%E8%A1%8C%E6%87%89%E7%94%A8%E7%A8%8B%E5%BC%8F"><span class="nav-number">4.2.1.3.</span> <span class="nav-text">執行應用程式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#npm-%E7%9A%84%E8%87%AA%E5%BB%BA%E6%A8%A1%E7%B5%84"><span class="nav-number">4.2.2.</span> <span class="nav-text">npm 的自建模組</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AB%8B%E7%9B%B8%E4%BE%9D%E9%97%9C%E4%BF%82%E7%9A%84%E6%87%89%E7%94%A8"><span class="nav-number">4.2.2.1.</span> <span class="nav-text">立相依關係的應用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E4%BA%AB%E6%A8%A1%E7%B5%84%E8%87%B3-npm"><span class="nav-number">4.2.2.2.</span> <span class="nav-text">分享模組至 npm</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Core-Modules-%EF%BC%88%E5%8E%9F%E7%94%9F%E6%A8%A1%E7%B5%84%EF%BC%89"><span class="nav-number">4.3.</span> <span class="nav-text">Core Modules （原生模組）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#fs-%E6%AA%94%E6%A1%88%E7%B3%BB%E7%B5%B1"><span class="nav-number">4.3.1.</span> <span class="nav-text">fs 檔案系統</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AA%94%E6%A1%88%E8%B3%87%E8%A8%8A"><span class="nav-number">4.3.1.1.</span> <span class="nav-text">檔案資訊</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AA%94%E6%A1%88%E8%AE%80%E5%8F%96"><span class="nav-number">4.3.1.2.</span> <span class="nav-text">檔案讀取</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%AB%E5%85%A5%E6%AA%94%E6%A1%88"><span class="nav-number">4.3.1.3.</span> <span class="nav-text">寫入檔案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%AA%E9%99%A4%E6%AA%94%E6%A1%88%E8%88%87%E6%9B%B4%E5%90%8D"><span class="nav-number">4.3.1.4.</span> <span class="nav-text">刪除檔案與更名</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%96%8B%E5%95%9F%E9%97%9C%E9%96%89%E7%9A%84%E8%AE%80%E5%8F%96%E4%BF%AE%E6%94%B9"><span class="nav-number">4.3.2.</span> <span class="nav-text">開啟關閉的讀取修改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#events-%E4%BA%8B%E4%BB%B6"><span class="nav-number">4.3.3.</span> <span class="nav-text">events 事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#buffer-%E7%B7%A9%E8%A1%9D%E5%8D%80"><span class="nav-number">4.3.4.</span> <span class="nav-text">buffer 緩衝區</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#path-%E8%B7%AF%E5%BE%91"><span class="nav-number">4.3.5.</span> <span class="nav-text">path 路徑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%8E%9F%E7%94%9F%E6%A8%A1%E7%B5%84"><span class="nav-number">4.3.6.</span> <span class="nav-text">其他原生模組</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B6%B2%E8%B7%AF%E6%87%89%E7%94%A8"><span class="nav-number">5.</span> <span class="nav-text">網路應用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#net-%E9%80%9A%E8%A8%8A%E6%9C%8D%E5%8B%99"><span class="nav-number">5.1.</span> <span class="nav-text">net 通訊服務</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#http-%E7%B6%B2%E9%A0%81%E6%9C%8D%E5%8B%99"><span class="nav-number">5.2.</span> <span class="nav-text">http 網頁服務</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9E%E6%87%89%E5%85%A7%E5%AE%B9"><span class="nav-number">5.2.1.</span> <span class="nav-text">回應內容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9E%E6%87%89%E6%AA%94%E6%A1%88"><span class="nav-number">5.2.2.</span> <span class="nav-text">回應檔案</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E8%99%95%E7%90%86"><span class="nav-number">5.2.3.</span> <span class="nav-text">路由處理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8%E5%96%AE%E6%8F%90%E4%BA%A4"><span class="nav-number">5.2.4.</span> <span class="nav-text">表單提交</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Express-js"><span class="nav-number">5.3.</span> <span class="nav-text">Express.js</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E6%AC%A1%E5%AE%89%E8%A3%9D"><span class="nav-number">5.3.1.</span> <span class="nav-text">初次安裝</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E9%81%8B%E4%BD%9C%E8%88%87%E6%8E%9B%E8%BC%89%E9%9D%9C%E6%85%8B%E7%9B%AE%E9%8C%84"><span class="nav-number">5.3.2.</span> <span class="nav-text">初始運作與掛載靜態目錄</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%95%E8%AC%82-MVC"><span class="nav-number">5.3.3.</span> <span class="nav-text">何謂 MVC</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%87%89%E7%94%A8%E7%A8%8B%E5%BC%8F%E7%94%A2%E7%94%9F%E5%99%A8"><span class="nav-number">5.3.4.</span> <span class="nav-text">應用程式產生器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%9D-1"><span class="nav-number">5.3.4.1.</span> <span class="nav-text">安裝</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%87%89%E7%94%A8"><span class="nav-number">5.3.4.2.</span> <span class="nav-text">初始化應用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B5%90%E6%A7%8B%E8%AA%AA%E6%98%8E"><span class="nav-number">5.3.4.3.</span> <span class="nav-text">結構說明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%8B%E5%8B%95%E6%B7%BB%E5%8A%A0%E8%B7%AF%E7%94%B1%E8%88%87-View-%E7%B6%B2%E9%A0%81"><span class="nav-number">5.3.4.4.</span> <span class="nav-text">手動添加路由與 View 網頁</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AA%A2%E6%9F%A5%E7%95%AB%E9%9D%A2%E7%B5%90%E6%9E%9C"><span class="nav-number">5.3.4.5.</span> <span class="nav-text">檢查畫面結果</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%88%87-MySQL-%E9%80%A3%E7%B7%9A"><span class="nav-number">5.3.5.</span> <span class="nav-text">與 MySQL 連線</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Express-%E5%85%A7%E4%BD%BF%E7%94%A8-SELECT"><span class="nav-number">5.3.5.1.</span> <span class="nav-text">Express 內使用 SELECT</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%83%E8%80%83%E6%96%87%E7%8D%BB"><span class="nav-number">6.</span> <span class="nav-text">參考文獻</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Loki Jiang"
      src="/assets/config/author_loki.jpg">
  <p class="site-author-name" itemprop="name">Loki Jiang</p>
  <div class="site-description" itemprop="description">Time waits for no oneヽ(｀Д´)ﾉ</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">68</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/summer10920" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;summer10920" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:summer10920@gmail.com" title="E-Mail → mailto:summer10920@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://codepen.io/summer10920/pens/public?grid_type=list" title="CodePen → https:&#x2F;&#x2F;codepen.io&#x2F;summer10920&#x2F;pens&#x2F;public?grid_type&#x3D;list" rel="noopener me" target="_blank"><i class="fab fa-codepen fa-fw"></i>CodePen</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.youtube.com/c/LokiJiang/playlists" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;c&#x2F;LokiJiang&#x2F;playlists" rel="noopener me" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="回到頂端">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="http://demob17300.lokiwebs.com/" title="http:&#x2F;&#x2F;demob17300.lokiwebs.com&#x2F;" rel="noopener" target="_blank">DemoSite - 網頁設計乙術科</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://blog.lokiwebs.com/" title="http:&#x2F;&#x2F;blog.lokiwebs.com&#x2F;" rel="noopener" target="_blank">舊址(停更) - 札記 Blog</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://summer10920.github.io/2020/12-30/article-nodejs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/config/author_loki.jpg">
      <meta itemprop="name" content="Loki Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="洛奇的邪惡組織手札">
      <meta itemprop="description" content="Time waits for no oneヽ(｀Д´)ﾉ">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="[學習之路] Node.js 入門教學 | 洛奇的邪惡組織手札">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [學習之路] Node.js 入門教學<a href="https://github.com/summer10920/summer10920.github.io/edit/master/source/_posts/20201230-article-nodejs.md" class="post-edit-link" title="編輯" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a>
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-12-30 12:47:03" itemprop="dateCreated datePublished" datetime="2020-12-30T12:47:03+08:00">2020-12-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2024-08-22 10:31:12" itemprop="dateModified" datetime="2024-08-22T10:31:12+08:00">2024-08-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Zero-Road/" itemprop="url" rel="index"><span itemprop="name">Zero Road</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Zero-Road/Web-Fronted/" itemprop="url" rel="index"><span itemprop="name">Web Fronted</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="閱讀次數" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">閱讀次數：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>13,339</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>00:24:15</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>Node.js 是能夠在伺服器上面運行 JavaScript 的應用平台環境，透過 Node.js 提供的函式庫與執行環境能完成伺服器端服務，提供各種網路應用。本篇資源版本與環境如下：</p>
<ul>
<li>主題教材：<ul>
<li><a target="_blank" rel="noopener" href="https://nodejs.org/zh-tw/">Node.js 官方網站</a> 版本 v14.15.3</li>
<li><a target="_blank" rel="noopener" href="https://github.com/nvm-sh/nvm">NVM</a> 版本 v0.37.2</li>
<li><a target="_blank" rel="noopener" href="https://github.com/nvm-sh/nvm">NVM-windows</a> 版本 v1.1.7</li>
</ul>
</li>
<li>IDE 編譯器：VScode v1.52.1</li>
<li>作業系統：Windows 10 NT</li>
</ul>
<span id="more"></span>

<h1 id="認識"><a href="#認識" class="headerlink" title="認識"></a>認識</h1><ul>
<li>Node.js 透過安裝到指定伺服器主機內，使用 JavaScrpt 進行語法撰寫。常用於即時與推播等網路應用，像是 WebServer、聊天機器人、資料存取服務等網路應用。</li>
<li>早期是採用 C 與 Lua 程式語言開發但並不順利，直到 Google V8 JavaScript 引擎出現才成功，透過該引擎執行 JavaScript 代碼。</li>
<li>Node.js 本身是單執行緒，因此採用 Non-blocking I&#x2F;O 與非同步事件來規劃程式運作，這能讓大量使用者連線情況下不會因為等待 IO 等待回應而占用執行緒。</li>
<li>Node.js 提供多個模組的 API 函式庫，包含一些非同步的 IO 檔案存取、Socket、HTTP 等函式庫，所以 Node.js 自己就能創造 Web 伺服器，不需依賴 IIS 或 Apache 伺服器。</li>
<li>用戶端的 JS 全域物件為 window 物件，Node.js 的 JS 全域物件為 Global 物件。</li>
<li>Node.js 能在全域下使用 console 物件 與 setTimeout&#x2F;setInterval 函式，用法都跟一般的 JS 相同。</li>
</ul>
<h1 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h1><p>Node.js 作為伺服器應用平台，你需要提供一台主機作為伺服器運作。本教學使用 Windows 為伺服器環境，並提供三種安裝 Node.js 方式教學：</p>
<h2 id="官網下載"><a href="#官網下載" class="headerlink" title="官網下載"></a>官網下載</h2><p>前往官網提供穩定版 (LTS) 與最新版 (Current) 可選擇，選擇穩定版即可。安裝方式大多簡單快速通過即可，有幾個過程項目需注意：</p>
<ul>
<li>目前版本預設情況下會自動幫你安裝 npm 管理與設定 PATH 所需路徑。所以不用擔心需要額外安裝或設定什麼</li>
<li>會提供一個 Automaticy install 的選項自動安裝工具請打勾，這能幫助你未來遇到一些 npm 模組可提供修改時呼叫 Python 與 VScode 來連動修改。若未安裝時未來會出現錯誤訊息 (ex:gyp ERR! find Python)。若有打勾將會主程式安裝完畢後呼叫 cmd 進行此項目工具安裝。</li>
</ul>
<p>安裝完畢後執行 cmd 或 powershell，輸入 <code>node -v</code> 或 <code>npm -v</code> 能得到版本資訊代表安裝成功。</p>
<h2 id="NVM-工具"><a href="#NVM-工具" class="headerlink" title="NVM 工具"></a>NVM 工具</h2><p>全名為 <a target="_blank" rel="noopener" href="https://github.com/nvm-sh/nvm">Node Version Manager</a>，為 Caswell 作者開發出來的強大管理工具，主要是由於工作上處理專案時需要不同的 Node 版本來執行（因有些 npm 模組有版本相容性問題）。大多數的開發者都會選擇 NVM 來作為 node 安裝來源。</p>
<p>根據手冊說明安裝十分簡單，開啟 cmd 輸入以下指令（擇一）即可，但實際上僅適用於 Mac &#x2F; Linux 應用</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.<span class="number">37</span>.<span class="number">2</span>/install.sh | bash</span><br><span class="line">wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.<span class="number">37</span>.<span class="number">2</span>/install.sh | bash</span><br></pre></td></tr></table></figure>
<p>我們環境是 windows 無法使用，所以需要找支援 windows 的另一家 NVM 工具，這裡提供 <a target="_blank" rel="noopener" href="https://github.com/jasongin/nvs/releases">nvs</a> 來使用。（另外常用的還有 <a target="_blank" rel="noopener" href="https://github.com/coreybutler/nvm-windows/releases">nvm-windows</a> 選擇） 讓我們下載 nvm-setup.zip 使用。</p>
<p>安裝過程也十分簡單沒什麼選項，之後開啟 cmd 或 powershell 輸入 <code>nvs</code> 能列出版本選擇初次安裝。之後再次輸入 <code>nvs</code> 能選擇使用 node 版本或另外安裝。指令簡單明瞭。</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Users</span>\<span class="title">Loki</span>&gt; <span class="title">nvs</span></span></span><br><span class="line"><span class="function"><span class="title">Downloading</span> [###########################################################################################] 100%</span></span><br><span class="line"><span class="function"><span class="title">Extracting</span>  [###########################################################################################] 100%</span></span><br><span class="line"><span class="function"><span class="title">PATH</span> += $<span class="title">env:LOCALAPPDATA</span>\<span class="title">nvs</span>\<span class="title">node</span>\14.15.3\<span class="title">x64</span></span></span><br><span class="line"><span class="function"><span class="title">C</span>:\<span class="title">Users</span>\<span class="title">Loki</span>&gt; <span class="title">node</span> -<span class="title">v</span></span></span><br><span class="line"><span class="function"><span class="title">v14</span>.15.3</span></span><br><span class="line"><span class="function"><span class="title">C</span>:\<span class="title">Users</span>\<span class="title">Loki</span>&gt; <span class="title">npm</span> -<span class="title">v</span></span></span><br><span class="line"><span class="function">6.14.9</span></span><br></pre></td></tr></table></figure>

<p>如此一來你就獲得 node 與 npm 的安裝，如果工作需要可多安裝幾個版本。需要切換 node 版本時再透過指令 <code>nvs</code> 做畫面選擇即可。注意每個 node 版本都是獨立的 npm 套件不共用。</p>
<h2 id="USB-免安裝"><a href="#USB-免安裝" class="headerlink" title="USB 免安裝"></a>USB 免安裝</h2><p>因為工作需要不同電腦上執行，因此我習慣用 USB 作免安裝環境。因此 VScode、GIT、Nodejs 都能使用免安裝。同時依賴 VSCode 的同步功能自動把 GIT 跟 Nodejs 相關檔案都一起同步化。這裡將會順便說明 GIT 如何加入到免安裝：</p>
<h3 id="VSCode-的免安裝"><a href="#VSCode-的免安裝" class="headerlink" title="VSCode 的免安裝"></a>VSCode 的免安裝</h3><p>使用安裝不特別說明，本站舊文或網路上曾提到可自行參考。另外根據官方 Portable 的資料保留方式，之後也會把 Git 與 Node 的檔案都放入到 <code>(VSCode folder)\data\user-data</code> 內，這樣方便 VSCode 進行 Setting Sync 時一同備份保留。</p>
<h3 id="GIT-的免安裝"><a href="#GIT-的免安裝" class="headerlink" title="GIT 的免安裝"></a>GIT 的免安裝</h3><p>到 GIT 網站 <a target="_blank" rel="noopener" href="https://git-scm.com/download/win">下載頁面</a>，點選對應的 windows 作業系統在觸發下載（自動下載請直接取消）的頁面上找到 64-bit Git for Windows Portable。下載解壓到 USB 位置的 VSCode 路徑 <code>(VSCode folder)\data\user-data\User\Lokitools\Git</code>。</p>
<h3 id="Node-的免安裝-（兩種方式）"><a href="#Node-的免安裝-（兩種方式）" class="headerlink" title="Node 的免安裝 （兩種方式）"></a>Node 的免安裝 （兩種方式）</h3><ul>
<li>方法一：官方的 Node<br>到 Nodejs 網站 <a target="_blank" rel="noopener" href="https://nodejs.org/en/download/">下載頁面</a>，點選對應的 windows 找到 Windows Binary (.zip) 連結，下載解壓到 USB 位置的 VSCode 路徑 <code>(VSCode folder)\data\user-data\User\lokiTools\node</code></li>
<li>方法二：NVS 管理器 （本篇使用方式為此）<br>到 NVS 的 release 處 <a target="_blank" rel="noopener" href="https://github.com/jasongin/nvs/releases/tag/v1.6.0">下載頁面</a>，點選 Source Code 版本連結，下載解壓到 USB 位置的 VSCode 路徑 <code>(VSCode folder)\data\user-data\User\lokiTools\nvs</code></li>
</ul>
<h4 id="移植舊-npm-模組"><a href="#移植舊-npm-模組" class="headerlink" title="移植舊 npm 模組"></a>移植舊 npm 模組</h4><p>如果已經有 Node 有相關 npm 模組，記得搬移進去到你的 <code>node\node_modules</code> 內，node 根目錄的一些模組主程式也要（舉例 hexo,hexo.cmd,hexo.ps1 也對應到新位置根目錄）。</p>
<h3 id="讓-VScode-終端機自動執行-GIT-與-Node"><a href="#讓-VScode-終端機自動執行-GIT-與-Node" class="headerlink" title="讓 VScode 終端機自動執行 GIT 與 Node"></a>讓 VScode 終端機自動執行 GIT 與 Node</h3><p>大致有三個重點要處理：</p>
<ul>
<li>讓 VSCode 接管你的 GIT 執行程式。</li>
<li>讓 VSCode 終端機是使用 windows cmd 為執行環境。</li>
<li>讓 node,npm,git 的 windows PATH 路徑於每次操作終端機之前寫入到該電腦的 PATH 環境內，使不同電腦上都能正常運作。</li>
</ul>
<p>開始設計步驟如下：</p>
<ol>
<li><p>目前所有已持有的檔案都在 <code>(VSCode folder)\data\user-data\User\lokiTools\</code> 內，裡面有 Git,node（或 nvs) 資料夾。</p>
</li>
<li><p>在該資料夾底下建立 <code>autoRunOnVSCode.bat</code> 批次檔案，讓 VSCode 在使用終端機時自動跑這個前置作業。</p>
</li>
<li><p>批次檔案主要處理宣告 PATH(Git 與 node 路徑）寫入到目前電腦的 PATH 環境內，以及顯示相關版本資訊。</p>
</li>
<li><p>這裡提供兩種版本，分別對應前面方法一（官方 node) 與方法二 (nvs) 的寫法，擇一即可。</p>
<figure class="highlight shell"><figcaption><span>autoRunOnVSCode.bat by Nodejs</span></figcaption><table><tr><td class="code"><pre><span class="line">@echo off</span><br><span class="line">:::::::::::::::::::::::::::::::::::::::::: Put into Windows PATH</span><br><span class="line">:: GIT</span><br><span class="line">set gitdir=%~dp0\Git\cmd</span><br><span class="line"></span><br><span class="line">:: Method 1 : node PATH</span><br><span class="line">set nodedir=%~dp0\node</span><br><span class="line">set path=%PATH%;%gitdir%;%nodedir%</span><br><span class="line">:::::::::::::::::::::::::::::::::::::::::: Print Message</span><br><span class="line"></span><br><span class="line">:: Figure out versions for Git, Node.Js, and NPM. This first one breaks apart the Git version to make it look nicer.</span><br><span class="line">for /f &quot;tokens=3-6 delims=. &quot; %%a in (&#x27;git --version&#x27;) do (set gitver1=%%a&amp;set gitver2=%%b&amp;set gitver3=%%c)</span><br><span class="line">echo Git Version = v%gitver1%.%gitver2%.%gitver3%</span><br><span class="line">for /f &quot;tokens=1&quot; %%v in (&#x27;node -v&#x27;) do set nodever=%%v</span><br><span class="line">echo Node Version = %nodever%</span><br><span class="line">for /f &quot;tokens=1&quot; %%n in (&#x27;npm -v&#x27;) do set npmver=%%n</span><br><span class="line">echo NPM Version = v%npmver%</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><figcaption><span>autoRunOnVSCode.bat by nvs</span></figcaption><table><tr><td class="code"><pre><span class="line">@echo off</span><br><span class="line">:::::::::::::::::::::::::::::::::::::::::: Put into Windows PATH</span><br><span class="line">:: GIT</span><br><span class="line">set gitdir=%~dp0\Git\cmd</span><br><span class="line"></span><br><span class="line">:: method 2 : nvs (node version switcher) PATH</span><br><span class="line">set nvsdir=%~dp0\nvs</span><br><span class="line">set path=%PATH%;%gitdir%;%nvsdir%</span><br><span class="line">call %~dp0\nvs\nvs.cmd</span><br><span class="line"></span><br><span class="line">:::::::::::::::::::::::::::::::::::::::::: Print Message</span><br><span class="line">echo -------------------------</span><br><span class="line">for /f &quot;tokens=1&quot; %%n in (&#x27;nvs -v&#x27;) do set nvsver=%%n</span><br><span class="line">echo NVS Version = v%nvsver%</span><br><span class="line">echo -------------------------</span><br><span class="line"></span><br><span class="line">:: Figure out versions for Git, Node.Js, and NPM. This first one breaks apart the Git version to make it look nicer.</span><br><span class="line">for /f &quot;tokens=3-6 delims=. &quot; %%a in (&#x27;git --version&#x27;) do (set gitver1=%%a&amp;set gitver2=%%b&amp;set gitver3=%%c)</span><br><span class="line">echo Git Version = v%gitver1%.%gitver2%.%gitver3%</span><br><span class="line">for /f &quot;tokens=1&quot; %%v in (&#x27;node -v&#x27;) do set nodever=%%v</span><br><span class="line">echo Node Version = %nodever%</span><br><span class="line">for /f &quot;tokens=1&quot; %%n in (&#x27;npm -v&#x27;) do set npmver=%%n</span><br><span class="line">echo NPM Version = v%npmver%</span><br></pre></td></tr></table></figure>
</li>
<li><p>最後是設定 VSCode 的 <code>settings.json</code>，路徑設定走絕對路徑（舉例這裡 USB 固定為 K 槽），其三個重點：</p>
<ul>
<li>設定 git 的執行擋在我們免安裝隨身碟之處</li>
<li>設定終端機採用 windows 內建的 cmd 命令字元</li>
<li>讓每次使用 VSCode 的終端機時會自動執行這個 <code>autoRunOnVSCode.bat</code> 批次檔<figure class="highlight json"><figcaption><span>settings.json</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//for cmd and git path</span></span><br><span class="line"><span class="attr">&quot;editor.renameOnType&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;git.autofetch&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;git.path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;K:\\VSCODE\\data\\user-data\\User\\lokiTools\\Git\\bin\\git.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;terminal.integrated.shell.linux&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;terminal.integrated.shell.windows&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:\\WINDOWS\\System32\\cmd.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;terminal.integrated.shellArgs.windows&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;/K&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;K:\\VSCODE\\data\\user-data\\User\\lokiTools\\autoRunOnVSCode.bat&quot;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>目前為止已可成功使用免安裝隨身碟，只要保持 USB 磁碟機為固定代號就能使用。<br><img src="https://i.imgur.com/vPPrZA3.png" alt="初次執行選擇"><br><img src="https://i.imgur.com/1avqpDq.png" alt="環境自動完成"></p>
</li>
</ol>
<h1 id="入門操作"><a href="#入門操作" class="headerlink" title="入門操作"></a>入門操作</h1><p>Node 操作原理是透過終端機指令 <code>node *.js</code> 去解讀 JS 語法。如果有 console 時會直接由 node 回應給終端機輸出。假設有個檔案為：</p>
<figure class="highlight javascript"><figcaption><span>helloworld.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>透過 node 去執行這個檔案你會在終端機得到一個訊息。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">L:\nodeTest&gt;node helloworld.js</span><br><span class="line">Hello World</span><br><span class="line"></span><br><span class="line">L:\nodeTest&gt;</span><br></pre></td></tr></table></figure>

<p>或者採用進入 node REPL 命令模式，在關鍵字 <code>node</code> 送出後，就能直接在終端機上輸入 node 指令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">L:\nodeTest&gt;node</span><br><span class="line">Welcome to Node.js v14.15.3.</span><br><span class="line">Type &quot;.help&quot; for more information.</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">console.log(<span class="string">&quot;hello world&quot;</span>)</span></span><br><span class="line">hello world</span><br><span class="line">undefined</span><br><span class="line"><span class="meta prompt_">&gt;</span></span><br></pre></td></tr></table></figure>

<p>在 REPL 模式內妳可以使用以下快速鍵：</p>
<ul>
<li>ctrl + c：退出當前終端。</li>
<li>ctrl + c：單擊兩次-退出 Node REPL。</li>
<li>ctrl + d：退出節點 REPL。</li>
<li>上下鍵：查看輸入的歷史命令</li>
<li>tab 鍵：列出當前命令</li>
<li>.help：列出使用命令</li>
<li>.break：退出多行表達式</li>
<li>.clear：退出多行表達式</li>
<li>.save filename：保存當前的 Node REPL 模式到指定檔案</li>
<li>.load filename：加載當前節點 REPL 模式的檔案內容。</li>
</ul>
<h2 id="process-物件"><a href="#process-物件" class="headerlink" title="process 物件"></a>process 物件</h2><p>內建的 <a target="_blank" rel="noopener" href="http://nodejs.cn/api/process.html">process 物件</a> 能代表目前正執行代碼之流程運作，你可以控制當下 process 之事件、屬性、方法。可使用的資源多可參考官方手冊做了解，這裡舉例兩個操作：</p>
<h3 id="exit-中斷操作"><a href="#exit-中斷操作" class="headerlink" title="exit 中斷操作"></a>exit 中斷操作</h3><p>當代碼遇到 <code>process.exit()</code> 代表當前執行碼結束。或使用 event 事件遇到 exit 行程結束時觸發指定動作。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">process.<span class="title function_">on</span>(<span class="string">&#x27;exit&#x27;</span>,<span class="function">()=&gt;</span>&#123; <span class="comment">//當 process 遇到發生 exit 事件時做以下執行</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;done&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">process.<span class="title function_">exit</span>(); <span class="comment">//直接 exit 結束</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>); <span class="comment">//不會被執行到</span></span><br><span class="line"><span class="comment">// print: 1 2 done</span></span><br></pre></td></tr></table></figure>
<h3 id="nextTick-指定下次執行"><a href="#nextTick-指定下次執行" class="headerlink" title="nextTick 指定下次執行"></a>nextTick 指定下次執行</h3><p>由於 Node.js 採用事件迴圈方式來消化代碼，使得非同步與非阻擋式 I&#x2F;O 能順利後續處理。你也能指定將 callback 內容安排至下一次事件迴圈時第一個執行處。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">process.<span class="title function_">nextTick</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;next&quot;</span>);<span class="comment">//此 callback 作業是下一次事件迴圈時觸發。</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<h2 id="全域變數"><a href="#全域變數" class="headerlink" title="全域變數"></a>全域變數</h2><p>執行 Node 應用時，能透過 <code>__filename</code> 與 <code>__dirname</code> 全域變數來取得該應用程式所在之檔案名稱或目錄，對於需要找到相對路徑處理上有很大的幫助。</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`</span></span><br><span class="line"><span class="string">  dirname 應用目錄 <span class="subst">$&#123;__dirname&#125;</span></span></span><br><span class="line"><span class="string">  filename 檔案路徑 <span class="subst">$&#123;__filename&#125;</span></span></span><br><span class="line"><span class="string">`</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;node .</span><br><span class="line"></span><br><span class="line">  dirname 應用目錄 L:\nodeDemo</span><br><span class="line">  filename 檔案路徑 L:\nodeDemo\index.js</span><br></pre></td></tr></table></figure>

<h1 id="Moudles-模組"><a href="#Moudles-模組" class="headerlink" title="Moudles 模組"></a>Moudles 模組</h1><p>在設計 Node 應用時，由於是函式庫觀念，所有的可用函式都是使用模組系統觀念來運用，透過 require 以及 exports 方式提供檔案和模組之間的溝通。大致上可以分為三種類型：</p>
<ol>
<li>Third Party Modules （第三方模組）</li>
<li>Local Modules （自建模組）</li>
<li>Core Modules （原生模組）</li>
</ol>
<h2 id="Third-Party-Modules-（第三方模組）"><a href="#Third-Party-Modules-（第三方模組）" class="headerlink" title="Third Party Modules （第三方模組）"></a>Third Party Modules （第三方模組）</h2><p>第三方模組代表是別人寫好的自建模組（稍晚提到），直接將檔案放入本地端目錄下以相對路徑 requare 使用即可。或者也可透過網路使用 npm 取得別人上傳的模組。全名為 Node Package Manager 的 npm 是 Node.js 額外套件管理系統，安裝 node 主程式時就已安裝好。透過 npm 能夠輕易安裝各家套件模組。想知道有那些第三方模組可使用可以到網站 <a target="_blank" rel="noopener" href="https://www.npmjs.com/">npm | build amazing things</a> 找到，或者透過終端機指令 <code>npm search &lt;MOUDLE_NAME&gt;</code> 進行搜尋。同樣的你也可以將自建模組放到 npm 上面去提供別人下載使用。</p>
<figure class="highlight shell"><figcaption><span>舉例 npm 搜尋 Bootstrap 套件</span></figcaption><table><tr><td class="code"><pre><span class="line">:::::::::::::::: 搜尋可用的安裝模組</span><br><span class="line">L:\nodeTest&gt;npm search bootstrap</span><br><span class="line">NAME                      | DESCRIPTION          | AUTHOR          | DATE       | VERSION  | KEYWORDS</span><br><span class="line">bootstrap                 | The most popular…    | =xhmikosr =mdo… | 2020-10-13 | 4.5.3    | css sass mobile-first responsive front-end framework web</span><br><span class="line">less                      | Leaner CSS           | =matthew-dean…  | 2020-12-18 | 4.0.0    | compile less css nesting css variable css gradients css gradients css3 less compiler less css less mixins less less.js lesscss mixins nestedbootstrap-vue             | With more than 85…   | =jackmu95 =pi0… | 2021-01-01 | 2.21.2   | Bootstrap Bootstrap v4 Bootstrap for Vue Vue Vue.js Vue v2 SSR Web Components Directives Icons Bootstrap Icons ARIA Accessibility a11y Poppe@ng-bootstrap/ng-bootstra | Angular powered…     | =pkozlowski_os… | 2020-11-06 | 8.0.0    | angular bootstrap components accordion alert buttons carousel collapse datepicker dropdown modal pagination popover progressbar rating tablep                         |                      |                 |            |          |</span><br><span class="line">react-bootstrap           | Bootstrap 4…         | =monastic.panic… | 2020-10-21 | 1.4.0    | react ecosystem-react react-component bootstrap</span><br><span class="line">ngx-bootstrap             | Native Angular…      | =valorkin       | 2020-11-06 | 6.2.0    | angular bootstap ng ng2 angular2 twitter-bootstrap</span><br><span class="line">reactstrap                | React Bootstrap 4…   | =eddywashere…   | 2020-12-29 | 8.8.1    | reactstrap bootstrap react component components react-component ui</span><br><span class="line">bootstrap-slider          | Slider view…         | =rovolutionary… | 2020-06-04 | 11.0.2   | slider bootstrap twitter slide</span><br><span class="line">angular-ui-bootstrap      | Native AngularJS…    | =icfantv…       | 2017-10-14 | 2.5.6    | angularjs angular bootstrap ui</span><br><span class="line">bootstrap-select          | The jQuery plugin…   | =caseyjhol      | 2020-06-26 | 1.13.18  | javascript jquery form bootstrap dropdown select replacement</span><br><span class="line">font-awesome              | The iconic font and… | =juliankrispel  | 2016-10-24 | 4.7.0    | font awesome fontawesome icon font bootstrap</span><br><span class="line">@coreui/vue               | CoreUI Vue…          | =coreui         | 2020-12-17 | 3.2.7    | coreui vue vue-component vue-library bootstrap framework responsive layout component components</span><br><span class="line">bootstrap-loader          | Boostrap for Webpack | =alex.fedoseev… | 2019-04-27 | 3.0.4    | bootstrap twitter</span><br><span class="line">@fortawesome/fontawesome- | The iconic font,…    | =devoto13…      | 2020-10-05 | 1.2.32   | font awesome fontawesome icon svg bootstrap</span><br><span class="line">svg-core                  |                      |                 |            |          |</span><br><span class="line">@fortawesome/free-solid-s | The iconic font,…    | =devoto13…      | 2020-10-05 | 5.15.1   | font awesome fontawesome icon svg bootstrap</span><br><span class="line">vg-icons                  |                      |                 |            |          |</span><br><span class="line">bootstrap-sass            | bootstrap-sass is a… | =bootstrap-adm… | 2019-02-13 | 3.4.1    | bootstrap sass css eyeglass-module</span><br><span class="line">pwstrength-bootstrap      | jQuery plugin for…   | =ablanco        | 2020-05-28 | 3.0.9    | bootstrap password strength meter jquery-plugin ecosystem:jquery</span><br><span class="line">bootstrap-switch          | Turn checkboxes and… | =lostcrew       | 2019-04-13 | 3.4.0    | bootstrap switch javascript js</span><br><span class="line">bootstrap-input-spinner   | A Bootstrap 4 /…     | =shaack         | 2020-10-25 | 1.16.8   | Bootstrap 4 Bootstrap jQuery Widget Html Input UI</span><br><span class="line">@coreui/coreui            | HTML, CSS, and…      | =coreui         | 2020-11-23 | 3.4.0    | bootstrap css dashboard framework front-end responsive sass ui kit webapp</span><br></pre></td></tr></table></figure>

<h3 id="全域安裝-vs-區域安裝"><a href="#全域安裝-vs-區域安裝" class="headerlink" title="全域安裝 vs 區域安裝"></a>全域安裝 vs 區域安裝</h3><p>使用 npm 安裝第三方模組可分為全域或區域兩種安裝位置且會有不同的應用考量。全域會影響整個 node.js 的所有專案應用。區域即只會影響該專案目錄應用。</p>
<h4 id="Global-Install-全域安裝"><a href="#Global-Install-全域安裝" class="headerlink" title="Global Install 全域安裝"></a>Global Install 全域安裝</h4><ul>
<li>語法為 <code>npm install &lt;Module Name&gt; -g</code>，安裝位置會在&#x2F;user&#x2F;local（或 Node 安裝目錄）的 node_modules 目錄下</li>
<li>安裝位置在哪可透過指令 <code>npm root -g</code> 查詢（可由 <code>npm config set &#39;&#39;</code> 來修改位置）：<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">::::::::: 全域安裝路徑 ::::::</span><br><span class="line">L:\nodeTest&gt;npm root -g</span><br><span class="line">K:\VSCODE\data\user-data\User\lokiTools\nvs\node\14.15.3\x64\node_modules</span><br><span class="line"></span><br><span class="line">:::::::::Node 參數清單 ::::::</span><br><span class="line">L:\nodeTest&gt;npm config ls</span><br><span class="line">; cli configs</span><br><span class="line">metrics-registry = &quot;https://registry.npmjs.org/&quot;</span><br><span class="line">scope = &quot;&quot;</span><br><span class="line">user-agent = &quot;npm/6.14.9 node/v14.15.3 win32 x64&quot;</span><br><span class="line"></span><br><span class="line">; node bin location = K:\VSCODE\data\user-data\User\lokiTools\nvs\node\14.15.3\x64\node.exe</span><br><span class="line">; cwd = L:\nodeTest</span><br><span class="line">; HOME = C:\Users\Loki-Home</span><br><span class="line">; &quot;npm config ls -l&quot; to show all defaults.</span><br><span class="line"></span><br><span class="line">::::::::: 安裝目錄路徑：::::::</span><br><span class="line">L:\nodeTest&gt;npm config get prefix</span><br><span class="line">K:\VSCODE\data\user-data\User\lokiTools\nvs\node\14.15.3\x64</span><br></pre></td></tr></table></figure></li>
<li>一旦選擇全域方式安裝，該模組將被全域所能使用。也就是可以直接在命令列上使用模組。</li>
<li>一個模組就能被所有專案的 node 所使用避免過多的版本差異，但對個別專案的版本依賴有困難。</li>
</ul>
<p>舉例來說 npm 就是一個全域型的原件模組，可透過 list（或 ls) 指令確認（透過-g 為指定 global 全域）：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;npm list -g npm</span><br><span class="line">K:\VSCODE\data\user-data\User\lokiTools\nvs\node\14.15.3\x64</span><br><span class="line">`-- npm@6.14.9 </span><br></pre></td></tr></table></figure>

<h4 id="Local-Install-區域安裝"><a href="#Local-Install-區域安裝" class="headerlink" title="Local Install 區域安裝"></a>Local Install 區域安裝</h4><ul>
<li>語法為 <code>npm install &lt;Module/Package Name&gt;</code>，安裝到在目前終端機位置的 <code>node_modules</code> 目錄下</li>
<li>如果需要使用該模組時必須使用 <code>require(&lt;Moudle Name&gt;)</code> 才能載入使用</li>
<li>只有該專案目錄內才能找到該模組，其他目錄下無法找到。因此可避免不同專案內的版本衝突 (A 案需 ver1，B 案需 ver3)</li>
</ul>
<p>舉例來說：我們先在目錄 nodeTest 下安裝 express，nodeTest 會多一個 node_moudles 資料夾且可查詢，接著到另一個專案目錄 nodeDemo 做查詢結果。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">::: 本地安裝模組 express</span><br><span class="line">L:\nodeTest&gt;npm install express</span><br><span class="line"></span><br><span class="line">::: 這裡報錯誤是因為我們還沒使用正確步驟生成 package.json 導致，之後會重新說明正式做法</span><br><span class="line">npm WARN saveError ENOENT: no such file or directory, open &#x27;L:\nodeTest\package.json&#x27;</span><br><span class="line">npm notice created a lockfile as package-lock.json. You should commit this file.</span><br><span class="line">npm WARN enoent ENOENT: no such file or directory, open &#x27;L:\nodeTest\package.json&#x27;</span><br><span class="line">npm WARN nodeTest No description</span><br><span class="line">npm WARN nodeTest No repository field.</span><br><span class="line">npm WARN nodeTest No README data</span><br><span class="line">npm WARN nodeTest No license field.</span><br><span class="line"></span><br><span class="line">+ express@4.17.1</span><br><span class="line">added 50 packages from 37 contributors and audited 50 packages in 21.263s</span><br><span class="line">found 0 vulnerabilities</span><br><span class="line"></span><br><span class="line">::: 可找到模組</span><br><span class="line">L:\nodeTest&gt;npm list express</span><br><span class="line">L:\nodeTest</span><br><span class="line">`-- express@4.17.1</span><br><span class="line"></span><br><span class="line">::: 其他目錄下找不到該模組</span><br><span class="line">L:\nodeTest&gt;cd /nodeDemo</span><br><span class="line">L:\nodeDemo&gt;npm list express</span><br><span class="line">L:\nodeDemo</span><br><span class="line">`-- (empty)</span><br></pre></td></tr></table></figure>

<h3 id="npm-其他指令"><a href="#npm-其他指令" class="headerlink" title="npm 其他指令"></a>npm 其他指令</h3><p>你可以使用 npm 進行一些常用操作：</p>
<ul>
<li>npm search &lt;NAME&gt;<br>已知的模組名稱進行搜尋檢查可用安裝與版本資訊</li>
<li>npm install|update|uninstall &lt;NAME&gt;<br>對已安裝過後的模組進行版本安裝、升級、移除。</li>
<li>npm help<br>查找 npm 相關指令</li>
<li>npm cache clear<br>清除 npm 本地暫存</li>
<li>npm publish|unpublish &lt;package&gt;@&lt;version&gt;<br>將目前專案目錄發佈到 npm 套件管理系統給 Nodejs 社群使用，也能取消指定的某版本</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">:::::::::::::::: 更新已安裝的模組</span><br><span class="line">L:\nodeTest&gt;npm update express</span><br><span class="line">:: 全域模組的升級方式：: L:\nodeTest&gt;npm update express -g</span><br><span class="line"></span><br><span class="line">:::::::::::::::: 移除已安裝的模組</span><br><span class="line">L:\nodeTest&gt;npm uninstall express</span><br><span class="line">npm WARN saveError ENOENT: no such file or directory, open &#x27;L:\nodeTest\package.json&#x27;</span><br><span class="line">npm WARN enoent ENOENT: no such file or directory, open &#x27;L:\nodeTest\package.json&#x27;</span><br><span class="line">npm WARN nodeTest No description</span><br><span class="line">npm WARN nodeTest No repository field.</span><br><span class="line">npm WARN nodeTest No README data</span><br><span class="line">npm WARN nodeTest No license field.</span><br><span class="line"></span><br><span class="line">removed 1 package and audited 73 packages in 1.39s</span><br><span class="line">found 0 vulnerabilities</span><br></pre></td></tr></table></figure>

<h2 id="Local-Modules（自建模組）"><a href="#Local-Modules（自建模組）" class="headerlink" title="Local Modules（自建模組）"></a>Local Modules（自建模組）</h2><p>自建模組就是自己寫一個模組提供給自己應用。模組單位為一個 js 檔案，跟 node 應用一樣都是 js 檔，但應用是透過指令 <code>node app.js</code> 來執行，模組是在應用內宣告 <code>request (&#39;mod.js&#39;)</code> 來載入，應用與模組兩種用法不同。自建模組也能打包成 npm 且分享至 npm 平台去。</p>
<h3 id="手動的自建模組"><a href="#手動的自建模組" class="headerlink" title="手動的自建模組"></a>手動的自建模組</h3><p>進行自建模組編寫時，最後需使用 export 方式傳出去。屆時任何應用進行 request 載入時才能正常接洽使用回傳內容。export 本身是一個變數，它屬於整個 module 模型下的原生練物件。因此只要將想回傳的東西指定給 export（可以是字串或文字）即可。</p>
<h4 id="產生-resport-回傳"><a href="#產生-resport-回傳" class="headerlink" title="產生 resport 回傳"></a>產生 resport 回傳</h4><p>跟隨範例，設計一個模組在專案目錄下建立 mod.js 進行設計。注意需要將資料回傳給應用時需指定 exports 來回應。</p>
<h5 id="方法一：將-exports-當作物件，指定三種名稱函式"><a href="#方法一：將-exports-當作物件，指定三種名稱函式" class="headerlink" title="方法一：將 exports 當作物件，指定三種名稱函式"></a>方法一：將 exports 當作物件，指定三種名稱函式</h5><figure class="highlight javascript"><figcaption><span>mod.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">en</span> = <span class="keyword">function</span> (<span class="params">userName</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello! &#x27;</span> + userName);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">tw</span> = <span class="keyword">function</span> (<span class="params">userName</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;你好！&#x27;</span> + userName);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">hk</span> = <span class="keyword">function</span> (<span class="params">userName</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;雷侯！&#x27;</span> + userName);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="方法二：將完整的物件指定給-export"><a href="#方法二：將完整的物件指定給-export" class="headerlink" title="方法二：將完整的物件指定給 export"></a>方法二：將完整的物件指定給 export</h5><figure class="highlight javascript"><figcaption><span>mod.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hello = &#123;</span><br><span class="line">  <span class="attr">en</span>: <span class="keyword">function</span> (<span class="params">userName</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello! &#x27;</span> + userName);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">tw</span>: <span class="keyword">function</span> (<span class="params">userName</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;你好！&#x27;</span> + userName);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">hk</span>: <span class="keyword">function</span> (<span class="params">userName</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;雷侯！&#x27;</span> + userName);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = hello;  </span><br><span class="line"><span class="comment">/********************</span></span><br><span class="line"><span class="comment">exports = hello;       也能直接寫成這樣省略 module 字樣</span></span><br><span class="line"><span class="comment">********************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/****另一種簡化後的寫法</span></span><br><span class="line"><span class="comment">module.exports = &#123;</span></span><br><span class="line"><span class="comment">  en: function (userName) &#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;Hello! &#x27; + userName);</span></span><br><span class="line"><span class="comment">  &#125;,</span></span><br><span class="line"><span class="comment">  tw: function (userName) &#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;你好！&#x27; + userName);</span></span><br><span class="line"><span class="comment">  &#125;,</span></span><br><span class="line"><span class="comment">  hk: function (userName) &#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;雷侯！&#x27; + userName);</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">****/</span></span><br></pre></td></tr></table></figure>
<h4 id="發出-request-取得結果"><a href="#發出-request-取得結果" class="headerlink" title="發出 request 取得結果"></a>發出 request 取得結果</h4><p>接著建立 test.js 檔案編寫 Node 應用，注意檔案路徑上的差異。我們透過 request 來請求載入結果存成變數，這個 MyMod 將是一個物件資料。就能直接指定物件屬性來取得函式結果。</p>
<figure class="highlight javascript"><figcaption><span>test.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  自訂模組的 requare 時需指定相對路徑，而原生或 npm 包裝的模組不需要</span></span><br><span class="line"><span class="comment">  .js 副檔名可省略，將會自動去尋找屬於 js 副檔名之檔名</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  const myMod = require(&#x27;./mod.js&#x27;);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> myMod = <span class="built_in">require</span>(<span class="string">&#x27;./mod&#x27;</span>);</span><br><span class="line">myMod.<span class="title function_">tw</span>(<span class="string">&quot;Loki&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="執行應用程式"><a href="#執行應用程式" class="headerlink" title="執行應用程式"></a>執行應用程式</h4><p>透過終端機執行 node 應用執行 test.js 程式，得到以下結果。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;node test.js</span><br><span class="line">你好！Loki</span><br></pre></td></tr></table></figure>

<h3 id="npm-的自建模組"><a href="#npm-的自建模組" class="headerlink" title="npm 的自建模組"></a>npm 的自建模組</h3><p>可使用 npm 元件方式新建立模組。在 npm 話題內所有的模組都是 package 安裝包觀念，因此每一個模組內都會有 package.json 檔案提供這個安裝包的詳細資訊。</p>
<ul>
<li>透過 <code>npm init</code> 方式初始化 package（將要求你輸入一些基本資料）。</li>
<li>一個 package 可以跟別人的 package 形成依賴關係使用。如果你安裝了 Package A 時，可能這個 A 會自動幫你下載其他指定的 Package BCDE… 利於本體 A 的正常運行。</li>
<li>所有的 npm 模組都有自己的 package.json 提供相關資訊參數，所以自己的 node 自訂模組也會有 package.json。</li>
<li>modules 是指一個功能程式之模組（不需 package.json)；package 是指一個具備 package.json 的完整安裝包，內容會包含多個 modules 或其他相依關係的 packages。</li>
</ul>
<h4 id="立相依關係的應用"><a href="#立相依關係的應用" class="headerlink" title="立相依關係的應用"></a>立相依關係的應用</h4><p>以下步驟為透過一個乾淨新專案為設計起點：</p>
<ol>
<li>先建立一個 test.js 等待（被 init 被偵測）</li>
<li>透過 init 來建立 package 並手動設定 package 基本資料。過程中你可以直接 Enter 用 npm 預判的預設值來自動填入。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;npm ls</span><br><span class="line">L:\nodeDemo</span><br><span class="line">-- (empty)</span><br><span class="line"></span><br><span class="line">L:\nodeDemo&gt;npm init</span><br><span class="line">This utility will walk you through creating a package.json file.</span><br><span class="line">It only covers the most common items, and tries to guess sensible defaults.</span><br><span class="line"></span><br><span class="line">See `npm help init` for definitive documentation on these fields</span><br><span class="line">and exactly what they do.</span><br><span class="line"></span><br><span class="line">Use `npm install &lt;pkg&gt;` afterwards to install a package and</span><br><span class="line">save it as a dependency in the package.json file.</span><br><span class="line"></span><br><span class="line">Press ^C at any time to quit.</span><br><span class="line">package name: (nodedemo)</span><br><span class="line">version: (1.0.0)</span><br><span class="line">description: my first package</span><br><span class="line">entry point: (test.js)</span><br><span class="line">test command:</span><br><span class="line">git repository:</span><br><span class="line">keywords:</span><br><span class="line">author: LokiJiang</span><br><span class="line">license: (ISC)</span><br><span class="line">About to write to L:\nodeDemo\package.json:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;nodedemo&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;my first package&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;test.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;author&quot;: &quot;LokiJiang&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Is this OK? (yes) yes</span><br></pre></td></tr></table></figure>

<p>接著安裝 npm express 到這個本地安裝目錄內，並添加 <code>--save</code> 儲存在相依關係清單。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;npm install express --save</span><br><span class="line">npm notice created a lockfile as package-lock.json. You should commit this file.</span><br><span class="line">npm WARN nodedemo@1.0.0 No repository field.</span><br><span class="line"></span><br><span class="line">+ express@4.17.1</span><br><span class="line">added 50 packages from 37 contributors and audited 50 packages in 24.244s</span><br><span class="line">found 0 vulnerabilities</span><br></pre></td></tr></table></figure>

<p>此時你可以回到根目錄的 package.json 內查看 dependencies 部分，會寫到這個模組需要依賴 express 套件。未來如果別人從 npm 安裝你這個模組時，會自動安裝 express 使你的自訂模組正常運行。你也可以試著從 <code>/node_moudles/express/package.json</code> 查看 dependencies 資訊，代表這個模組也依賴很多別人的套件。也就是為何你只安裝 express 卻在 <code>/node_moudles/</code> 被強迫載入一堆你不認識的模組套件。回話題到 test.js 設定 express 的調用：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;Hello World!&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Example app listening at http://localhost:<span class="subst">$&#123;port&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>回到終端機執行你的 test.js</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;node test.js</span><br><span class="line">Example app listening at http://localhost:3000</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/ICEs9yo.png" alt="Image"></p>
<h4 id="分享模組至-npm"><a href="#分享模組至-npm" class="headerlink" title="分享模組至 npm"></a>分享模組至 npm</h4><p>你可以將自建的 npm 模組分享至 npm 開源平台（需 <a target="_blank" rel="noopener" href="https://www.npmjs.com/">註冊帳號</a>)，如需打造私用領域需額外 pro 付費。要發布 package 至 npm 開源平台時有以下主要指令：</p>
<ul>
<li>npm whoami<br>若已登入帳號，能看到帳戶資訊</li>
<li>npm login<br>登入帳號</li>
<li>npm publish<br>將目前路徑下的 package 上傳至 npm，並根據 package.json 基本資料自動提供名稱與版本資訊。如需版本更新需手動調整 package.json 的版本號並再次覆蓋的送出本指令。</li>
<li>npm install &lt;Package_Name&gt;<br>將開源平台上的 Package 進行下載安裝</li>
</ul>
<h2 id="Core-Modules-（原生模組）"><a href="#Core-Modules-（原生模組）" class="headerlink" title="Core Modules （原生模組）"></a>Core Modules （原生模組）</h2><p>由 Node 提供原生的內建模組，提供直接使用於應用 APP 的操作。大致可分為以下常用重要的原生模組。</p>
<h3 id="fs-檔案系統"><a href="#fs-檔案系統" class="headerlink" title="fs 檔案系統"></a>fs 檔案系統</h3><p><a target="_blank" rel="noopener" href="http://nodejs.cn/api/fs.html">fs</a> 檔案系統可用功能十分廣泛，除了能對檔案進行調整讀取也能對目錄進行控制。使用前同樣需要透過 require 來載入該模組。</p>
<h4 id="檔案資訊"><a href="#檔案資訊" class="headerlink" title="檔案資訊"></a>檔案資訊</h4><p>透過 <code>fs.stat()</code> 方式獲得檔案情報，需要從 callback 的參數來獲得。不建議於進行檔案讀寫時額外用此方法確認之失敗手續，你應該直接用那些讀寫方法且若 err 則直接處理失敗手續。</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">stat</span>(<span class="string">&#x27;text.txt&#x27;</span>,<span class="keyword">function</span>(<span class="params">err,stats</span>)&#123; <span class="comment">//若檔案有誤，將產生 err 之錯誤物件</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//回傳皆為布林值</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;檔案：&quot;</span>+stats.<span class="title function_">isFile</span>());</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;目錄：&quot;</span>+stats.<span class="title function_">isDirectory</span>());</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;區塊類型：&quot;</span>+stats.<span class="title function_">isBlockDevice</span>());</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;字元類型：&quot;</span>+stats.<span class="title function_">isCharacterDevice</span>());</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;符號連接：&quot;</span>+stats.<span class="title function_">isSymbolicLink</span>());</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;網頁 Socket:&quot;</span>+stats.<span class="title function_">isSocket</span>());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="檔案讀取"><a href="#檔案讀取" class="headerlink" title="檔案讀取"></a>檔案讀取</h4><p>檔案 I&#x2F;O 存取操作的相關類別、方法、事件。讀取檔案的行為本身又可以分為同步 <code>fs.readFileSync(path[, options])</code> 與非同步 <code>fs.readFile(path[, options], callback)</code>：</p>
<figure class="highlight javascript"><figcaption><span>非同步</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">/**********file:test.txt </span></span><br><span class="line"><span class="comment">hello</span></span><br><span class="line"><span class="comment">**************************/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err; <span class="comment">//如果失敗就離開並回傳至失敗事件</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;world&quot;</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><figcaption><span>非同步執行結果</span></figcaption><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;node test.js</span><br><span class="line">world</span><br><span class="line">hello</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>同步</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">/**********file:test.txt </span></span><br><span class="line"><span class="comment">hello</span></span><br><span class="line"><span class="comment">**************************/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> data = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;test.txt&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;world&quot;</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><figcaption><span>非同步執行結果</span></figcaption><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;node test.js</span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure>

<h4 id="寫入檔案"><a href="#寫入檔案" class="headerlink" title="寫入檔案"></a>寫入檔案</h4><p>寫入檔案方式為 <code>fs.writeFile(file, data[, options], callback)</code>，指定路徑若檔案不存在則新增，反之為覆蓋。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;hero.txt&#x27;</span>,<span class="string">&#x27;Loki&#x27;</span>,<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;  <span class="comment">//[, options] 預設為 UTF8 可省略</span></span><br><span class="line">  <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;done&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>對已存在（不覆蓋）的檔案進行插入文字方式為 <code>fs.appendFile(path, data[, options], callback)</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">appendFile</span>(<span class="string">&#x27;hero.txt&#x27;</span>,<span class="string">&#x27;_Jiang&#x27;</span>,<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;  <span class="comment">//[, options] 預設為 UTF8 可省略</span></span><br><span class="line">  <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;done&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/********hero.txt</span></span><br><span class="line"><span class="comment">  * Loki_Jiang</span></span><br><span class="line"><span class="comment"> ************* */</span></span><br></pre></td></tr></table></figure>

<h4 id="刪除檔案與更名"><a href="#刪除檔案與更名" class="headerlink" title="刪除檔案與更名"></a>刪除檔案與更名</h4><p>刪除檔案的方式為 <code>fs.unlink(path, callback)</code>，修改檔案名稱的方式為 <code>fs.rename(oldPath, newPath, callback)</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// const fs = require(&#x27;fs&#x27;); </span></span><br><span class="line"><span class="comment">// fsrequire(&#x27;fs&#x27;).unlink(&#x27;hero.txt&#x27;, () =&gt; &#123;.... same as ↓</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>).<span class="title function_">unlink</span>(<span class="string">&#x27;hero.txt&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;done&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="開啟關閉的讀取修改"><a href="#開啟關閉的讀取修改" class="headerlink" title="開啟關閉的讀取修改"></a>開啟關閉的讀取修改</h3><p>這裡跟前面不太一樣的是先透過開啟檔案方式 <code>fs.open(path[, flags[, mode]], callback)</code> 將資源列入暫存再進行讀取寫入。相對來說資源效率比前面的使用還好。開啟檔案方式需使用 <a target="_blank" rel="noopener" href="http://nodejs.cn/api/fs.html#fs_file_system_flags">標記 flag</a> 來代表何種開啟方式，flag 公式如下：</p>
<ul>
<li><p>‘r’: 打開檔案用於讀取。如果檔案不存在則異常。</p>
</li>
<li><p>‘r+’: 打開檔案用於讀取和寫入。如果檔案不存在則異常。</p>
</li>
<li><p>‘rs+’: 打開檔案用於讀取和寫入（同步模式）。IO 操作將繞過本地系統的檔案緩存。</p>
</li>
<li><p>‘w’: 打開檔案用於寫入。如果檔案不存在則創建，如果檔案存在則截斷。</p>
</li>
<li><p>‘wx’: 類似於 ‘w’，但如果路徑存在則失敗。</p>
</li>
<li><p>‘w+’: 打開檔案用於讀取和寫入。如果檔案不存在則創建，如果檔案存在則截斷。</p>
</li>
<li><p>‘wx+’: 類似於 ‘w+’，但如果路徑存在則失敗。</p>
</li>
<li><p>‘a’: 打開檔案用於追加。如果檔案不存在則創建。</p>
</li>
<li><p>‘ax’: 類似於 ‘a’，但如果路徑已存在則失敗。</p>
</li>
<li><p>‘a+’: 打開檔案用於讀取和追加。如果檔案不存在則創建。</p>
</li>
<li><p>‘ax+’: 類似於 ‘a+’，但如果路徑存在，則失敗。</p>
</li>
<li><p>‘as’: 打開檔案用於追加（同步模式）。如果檔案不存在則創建。</p>
</li>
<li><p>‘as+’: 打開檔案用於讀取和追加（同步模式）。如果檔案不存在則創建。</p>
</li>
</ul>
<p>為了連續性作業示範，開啟檔案後我們將內容讀取動作 fs.read(fd, buffer, offset, length, position, callback)，並最後將檔案關閉 fs.close(fd, callback)。</p>
<figure class="highlight javascript"><figcaption><span>test.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">open</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, fd</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line"></span><br><span class="line">  fs.<span class="title function_">read</span>(fd, <span class="keyword">function</span> (<span class="params">err, bytesRead, buffer</span>) &#123;</span><br><span class="line">    <span class="comment">//fd 為此 fs.open 所產生的工作編號 (number)，利於指定上的操作行為。</span></span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (bytesRead &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(bytesRead + <span class="string">&quot; 字元被讀取&quot;</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(buffer.<span class="title function_">slice</span>(<span class="number">0</span>, bytesRead).<span class="title function_">toString</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fs.<span class="title function_">close</span>(fd, <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><figcaption><span>cmd</span></figcaption><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;node test.js</span><br><span class="line">5 字元被讀取</span><br><span class="line">hello</span><br></pre></td></tr></table></figure>

<h3 id="events-事件"><a href="#events-事件" class="headerlink" title="events 事件"></a>events 事件</h3><p><a target="_blank" rel="noopener" href="http://nodejs.cn/api/events.html">events</a> 為提供事件監聽與處理的方法，在 Node.js 的一些物件（透過 Emitter 觸發器）來觸發指定事件 (Listener) 進行呼叫函式。</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">EventEmitter</span> = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> lokiEvent=<span class="keyword">new</span> <span class="title class_">EventEmitter</span>(); <span class="comment">// 新事件</span></span><br><span class="line"></span><br><span class="line">lokiEvent.<span class="title function_">on</span>(<span class="string">&#x27;todo&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123; <span class="comment">// 該事件的 todo 發生時，做指定事情</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">lokiEvent.<span class="title function_">emit</span>(<span class="string">&#x27;todo&#x27;</span>); <span class="comment">// 觸發 lokiEvent 事件的 todo （觸發器名稱）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//print hello world</span></span><br></pre></td></tr></table></figure>

<h3 id="buffer-緩衝區"><a href="#buffer-緩衝區" class="headerlink" title="buffer 緩衝區"></a>buffer 緩衝區</h3><p><a target="_blank" rel="noopener" href="http://nodejs.cn/api/buffer.html">Buffer</a> 為處理二進位資料時的物件，要求作業系統之記憶體空間配額。當使用 fs 檔案讀取時會用到存放處理，Buffer 在全域下不需要使用 require 就能使用。</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> bf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;Loki&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(bf); <span class="comment">//&lt;Buffer 4c 6f 6b 69&gt;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(bf.<span class="title function_">toString</span>()); <span class="comment">//Loki</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(bf.<span class="title function_">toString</span>(<span class="string">&#x27;hex&#x27;</span>)); <span class="comment">//4c6f6b69</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(bf.<span class="title function_">toString</span>(<span class="string">&#x27;base64&#x27;</span>)); <span class="comment">// hello</span></span><br></pre></td></tr></table></figure>

<h3 id="path-路徑"><a href="#path-路徑" class="headerlink" title="path 路徑"></a>path 路徑</h3><p><a target="_blank" rel="noopener" href="http://nodejs.cn/api/path.html">path</a> 主要是在進行 fs 檔案目錄之操作讀取寫入時，會遇到的字串轉換處理。</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* normalize 協助拔除 `.`, `..`, `\\`，以及修正如 windows 作業系統的路徑表示符號 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">normalize</span>(<span class="string">&#x27;C:////temp\\\\/\\/\\/foo/bar&#x27;</span>));</span><br><span class="line"><span class="comment">//print C:\temp\foo\bar</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* join 能將指定字串進行合併 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;index.html&#x27;</span>));</span><br><span class="line"><span class="comment">//print L:\nodeDemo\index.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">basename 取出字串之檔名</span></span><br><span class="line"><span class="comment">extname 取出字串之附檔名</span></span><br><span class="line"><span class="comment">dirname 取出字串之目錄路徑</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(__filename);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">basename</span>(__filename));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">extname</span>(__filename));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">dirname</span>(__filename));</span><br><span class="line"><span class="comment">//print L:\nodeDemo\index.js</span></span><br><span class="line"><span class="comment">//print index.js</span></span><br><span class="line"><span class="comment">//print .js</span></span><br><span class="line"><span class="comment">//print L:\nodeDemo</span></span><br></pre></td></tr></table></figure>

<h3 id="其他原生模組"><a href="#其他原生模組" class="headerlink" title="其他原生模組"></a>其他原生模組</h3><p>以下是部分常見模組，還有很多模組無法一一列出。下一節將重要的網路應用相關模組（包含原生與第三方）額外獨立介紹。</p>
<ul>
<li>os：控制作業系統或獲得相關資訊的方法。</li>
<li>url：提供解析 URL 之方法。</li>
<li>querystring：用來解析從用戶端傳回 querystring 字串之方法。</li>
<li>util：提供開發者使用的實用函式。</li>
</ul>
<h1 id="網路應用"><a href="#網路應用" class="headerlink" title="網路應用"></a>網路應用</h1><p>本章節目標將常用之網路應用開發所需模組與設計技巧。</p>
<h2 id="net-通訊服務"><a href="#net-通訊服務" class="headerlink" title="net 通訊服務"></a>net 通訊服務</h2><p>TCP 是 HTTP 通訊的基礎協定，作為 Server 與 Client 的封包傳送，用於一些底層上的資料確認通信使用。這不是網頁媒體使用，而只是一種資訊封包傳送技術。使用方式為透過 <a target="_blank" rel="noopener" href="http://nodejs.cn/api/net.html#net_net">net</a> 模組來進行架設 TCP 伺服器。我們需要設計兩個應用程式分別為 server.js 與 client.js，TCP 伺服器保持監聽模式等待 Client 進行連線進一步取得 Client 資料，並回應資料還給 Client。</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> net = <span class="built_in">require</span>(<span class="string">&#x27;net&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> server = net.<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">myConnect</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//顯示連線資訊</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`正在與 <span class="subst">$&#123;myConnect.remoteAddress&#125;</span>:<span class="subst">$&#123;myConnect.remotePort&#125;</span> 建立連線`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//接收 Client Data 事件之處理</span></span><br><span class="line">  myConnect.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`來自 <span class="subst">$&#123;myConnect.remoteAddress&#125;</span> 的 client 資料為 &#x27;<span class="subst">$&#123;data&#125;</span>&#x27;`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//寫入資料至 Client 端</span></span><br><span class="line">    <span class="keyword">const</span> serverData=<span class="string">`hi! Client`</span>;</span><br><span class="line">    myConnect.<span class="title function_">write</span>(serverData);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`發送給 Client:<span class="subst">$&#123;serverData&#125;</span>`</span>)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//監聽 Client Close 事件之處理</span></span><br><span class="line">  myConnect.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="keyword">function</span> (<span class="params">had_error</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (had_error) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;連線錯誤&#x27;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Client 連線已關閉，伺服器持續運作中。..&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//啟用 Server 服務</span></span><br><span class="line"><span class="keyword">const</span> host = <span class="string">&#x27;192.168.1.105&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3999</span>;</span><br><span class="line">server.<span class="title function_">listen</span>(port, host, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`伺服器服務中。...<span class="subst">$&#123;host&#125;</span>:<span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>client.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> net = <span class="built_in">require</span>(<span class="string">&#x27;net&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> client = <span class="keyword">new</span> net.<span class="title class_">Socket</span>(); <span class="comment">//建立 Socket</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//連線至 Server</span></span><br><span class="line"><span class="keyword">const</span> host = <span class="string">&#x27;192.168.1.105&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3999</span>;</span><br><span class="line">client.<span class="title function_">connect</span>(port, host, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`連線至 Server <span class="subst">$&#123;host&#125;</span>:<span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//提供 client 資料傳送</span></span><br><span class="line">  <span class="keyword">const</span> clientData=<span class="string">&#x27;hi! Server&#x27;</span>;</span><br><span class="line">  client.<span class="title function_">write</span>(clientData);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`發送給 Server：<span class="subst">$&#123;clientData&#125;</span>`</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//監聽 Server Data 事件之處理</span></span><br><span class="line">client.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server 回應：<span class="subst">$&#123;data&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//請求關閉 Server 之連線</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`即將關閉伺服器連線。..`</span>);</span><br><span class="line">  client.<span class="title function_">destroy</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//接收 Server Close 事件之處理</span></span><br><span class="line">client.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="keyword">function</span> (<span class="params">had_error</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (had_error) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;連線錯誤&#x27;</span>);</span><br><span class="line">  <span class="keyword">else</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server 連線已關閉&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>接著透過不同 node 環境分別扮演 Server 與 Clinet 來測試連線。<br><img src="https://i.imgur.com/omVygPq.png" alt="Image"></p>
<h2 id="http-網頁服務"><a href="#http-網頁服務" class="headerlink" title="http 網頁服務"></a>http 網頁服務</h2><p>HTTP 架構於前者 TCP 之上層協定，能作為 Web Server 與瀏覽器之間的資料傳送。我們能使用 <a target="_blank" rel="noopener" href="http://nodejs.cn/api/http.html">http</a> 模組來建立 Web Server 的相關類別、方法、事件（也是 NodeJS 的官方手冊初登場的新手教材教學），用於處理瀏覽器所發出的 HTTP 請求。</p>
<h3 id="回應內容"><a href="#回應內容" class="headerlink" title="回應內容"></a>回應內容</h3><p>當瀏覽器對伺服器進行 HTTP 請求時獲得文字回應方式：</p>
<ol>
<li>指定資料夾並建立 js 檔案，準備以下內容：<figure class="highlight javascript"><figcaption><span>webServerTXT.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);  <span class="comment">//宣告原生模組 http</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//建立伺服器且提供網頁狀態、HEAD 資訊、網頁內容</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// response.statusCode = 200;</span></span><br><span class="line">  <span class="comment">// response.setHeader(&#x27;Content-Type&#x27;, &#x27;text/plain&#x27;);  //設定 response HEAD</span></span><br><span class="line">  <span class="comment">// response.write(&#x27;Hello World&#x27;)  //設定網頁內容</span></span><br><span class="line">  <span class="comment">// response.end(); // response 送出</span></span><br><span class="line">  <span class="comment">// same as ↓</span></span><br><span class="line"></span><br><span class="line">  response.<span class="title function_">writeHead</span>(<span class="number">200</span>,&#123;<span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;text/plain&#x27;</span>&#125;);　<span class="comment">//response.setHeader() 適合循序參數調整且最後將由 writeHead() 進行嘗試合併，writeHeader() 內容優先為主</span></span><br><span class="line">  response.<span class="title function_">end</span>(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//對伺服器進行開機並於完成作業後顯示文字至終端機</span></span><br><span class="line"><span class="keyword">const</span> hostname = <span class="string">&#x27;127.0.0.1&#x27;</span>, port = <span class="number">3000</span>; <span class="comment">//設定 Web 主機與通訊埠</span></span><br><span class="line">server.<span class="title function_">listen</span>(port, hostname, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`</span></span><br><span class="line"><span class="string">  Server running at http://<span class="subst">$&#123;hostname&#125;</span>:<span class="subst">$&#123;port&#125;</span>/</span></span><br><span class="line"><span class="string">  Close Server press &#x27;Ctrl+C&#x27; to exit</span></span><br><span class="line"><span class="string">  `</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>接著終端機輸入指令。透過提示的指令開啟瀏覽器至指定 URL 網頁得到提示與伺服器運作之真實網頁。<figure class="highlight shell"><figcaption><span>cmd</span></figcaption><table><tr><td class="code"><pre><span class="line">L:\nodeTest&gt;node webServerTXT.js</span><br><span class="line"></span><br><span class="line">  Server running at http://127.0.0.1:3000/</span><br><span class="line">  Close Server Use Key &#x27;Ctrl+C&#x27;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>我們也可以直接回應一個網頁格式的內容，這裡我們寫得更簡速些，另注意 HEAD 資訊改為 <code>text/html</code>。</p>
<figure class="highlight javascript"><figcaption><span>webServerHTML.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>).<span class="title function_">createServer</span>(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span> &#125;);</span><br><span class="line">  res.<span class="title function_">write</span>(<span class="string">`</span></span><br><span class="line"><span class="string">    &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">    &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">      &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;title&gt;Test HTML&lt;/title&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">      &lt;h1&gt;Hellor World&lt;/h1&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">  `</span>);</span><br><span class="line">  res.<span class="title function_">end</span>();</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27; Server running at http://127.0.0.1:3000/&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><figcaption><span>cmd</span></figcaption><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;node webServerHTML</span><br><span class="line"> Server running at http://127.0.0.1:3000/</span><br></pre></td></tr></table></figure>

<p>也能傳送 JSON 資料給請求端，注意 HEAD 宣告改為 <code>application/json</code>。</p>
<figure class="highlight javascript"><figcaption><span>webServerJSON.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;); <span class="comment">//設定 response HEAD</span></span><br><span class="line">  response.<span class="title function_">write</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">dog</span>: <span class="string">&quot;wow&quot;</span>, <span class="attr">cat</span>: <span class="string">&quot;kiki&quot;</span> &#125;));</span><br><span class="line">  response.<span class="title function_">end</span>();</span><br><span class="line">&#125;);</span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server running at http://127.0.0.1:3000/`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>關於 request 用途， <code>http.createServer</code> 所產生的 callback 之中，除了能指定 response 內容作為我們的目標網頁，request 也能提供非常多有用的 <a target="_blank" rel="noopener" href="https://nodejs.org/api/http.html#http_class_http_incomingmessage">IncomingMessage</a> 來源資訊。譬如我們可以取得請求方的資料如 URL、HEAD、DATA</p>
<figure class="highlight javascript"><figcaption><span>test.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);  <span class="comment">//宣告原生模組 http</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span> &#125;); <span class="comment">//設定 response HEAD</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> request) <span class="variable language_">console</span>.<span class="title function_">log</span>(key);</span><br><span class="line">  response.<span class="title function_">end</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="string">&quot;127.0.0.1&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server running at http://127.0.0.1:3000/`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// $ node test.js , will read all request&#x27;s pototype</span></span><br></pre></td></tr></table></figure>

<h3 id="回應檔案"><a href="#回應檔案" class="headerlink" title="回應檔案"></a>回應檔案</h3><p>前面來說都是透過 JavaScript 來會應指定的文字，我們可以搭配 fs 模組取得內容進行回應。以下寫法為直接找到指定目錄，同時可以直接根據 URL 檔案名稱找到該目錄下的相同檔名，這裡多餘地利用 <code>require(&#39;path&#39;).basename(req.url)</code> 來過濾多餘路徑僅判斷檔名就好（不論 URL 的分類路徑）。以下前置先建立目錄 public 與 HTML 檔案 <code>index.html</code>, <code>a.html</code>, <code>b.html</code>, <code>page404.html</code>。</p>
<figure class="highlight javascript"><figcaption><span>webServerHTML.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">request, response</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> pageDir = __dirname + <span class="string">&#x27;/public/&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> filePath = pageDir + (<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>).<span class="title function_">basename</span>(request.<span class="property">url</span>) || <span class="string">&#x27;index.html&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> page404 = pageDir + <span class="string">&#x27;page404.html&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  fs.<span class="title function_">readFile</span>(filePath, <span class="keyword">function</span> (<span class="params">err, content</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">      response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span> &#125;);</span><br><span class="line">      response.<span class="title function_">end</span>(content);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">      fs.<span class="title function_">readFile</span>(page404, <span class="keyword">function</span> (<span class="params">err, content404</span>) &#123;</span><br><span class="line">        response.<span class="title function_">writeHead</span>(<span class="number">404</span>, &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span> &#125;);</span><br><span class="line">        response.<span class="title function_">end</span>(content404);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">3333</span>, <span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server running!!</span></span><br><span class="line"><span class="string">  try http://127.0.0.1:3333/a.html</span></span><br><span class="line"><span class="string">  try http://127.0.0.1:3333/b.html</span></span><br><span class="line"><span class="string">  try http://127.0.0.1:3333/aaaaa/a.html</span></span><br><span class="line"><span class="string">  try http://127.0.0.1:3333/c.html show &#x27;404 ERROR&#x27;</span></span><br><span class="line"><span class="string">  `</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>原生 HTTP 模組並不是很彈性，大部分的人都會推薦使用 npm 元件 express 作為網頁伺服器服務首選。</p>
</blockquote>
<h3 id="路由處理"><a href="#路由處理" class="headerlink" title="路由處理"></a>路由處理</h3><p>路由是指透過 URL 請求路徑來判斷執行的檔案讀取，呈現一種靜態檔案與動態網頁內容的變化。舉例來說，可以根據請求的網址內容做不同的網址名稱（不需要副檔名）來找到指定的路徑檔案，以下前置與上節相同都有 public 目錄與數個檔案。：</p>
<figure class="highlight javascript"><figcaption><span>webRouter.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> pageDir = __dirname + <span class="string">&#x27;/public/&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">//進行路由轉換：將動態 URL 算出靜態檔案位置</span></span><br><span class="line">    <span class="keyword">switch</span> (request.<span class="property">url</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;/apple&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">filePath</span>: pageDir + <span class="string">&#x27;a.html&#x27;</span></span><br><span class="line">        &#125;;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;/banana&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">filePath</span>: pageDir + <span class="string">&#x27;b.html&#x27;</span></span><br><span class="line">        &#125;;</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">code</span>: <span class="number">404</span>,</span><br><span class="line">          <span class="attr">filePath</span>: pageDir + <span class="string">&#x27;page404.html&#x27;</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;();　<span class="comment">//直接執行獲得物件資料</span></span><br><span class="line"></span><br><span class="line">  fs.<span class="title function_">readFile</span>(result.<span class="property">filePath</span>, <span class="keyword">function</span> (<span class="params">err, content</span>) &#123;</span><br><span class="line">    response.<span class="title function_">writeHead</span>(result.<span class="property">code</span>, &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span> &#125;); <span class="comment">//設定 response HEAD</span></span><br><span class="line">    <span class="keyword">if</span> (!err) response.<span class="title function_">end</span>(content);</span><br><span class="line">    <span class="keyword">else</span> response.<span class="title function_">end</span>(pageDir + <span class="string">&#x27;page404.html&#x27;</span>); <span class="comment">//如果檔案讀取失敗直接顯示 404 檔案</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">3333</span>, <span class="string">&quot;127.0.0.1&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server running!!</span></span><br><span class="line"><span class="string">    try http://127.0.0.1:3333/apple show &#x27;word A&#x27;</span></span><br><span class="line"><span class="string">    try http://127.0.0.1:3333/banana show &#x27;word B&#x27;</span></span><br><span class="line"><span class="string">    try http://127.0.0.1:3333/cat show &#x27;404 ERROR&#x27;</span></span><br><span class="line"><span class="string">    `</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="表單提交"><a href="#表單提交" class="headerlink" title="表單提交"></a>表單提交</h3><p>我們延續路由機制進行設計，提供三種路由可能分別是表單、結果、不存在。表單部分進行設計一個 URL 路由指向到靜態檔案 form 並採用 POST 方式傳送，並提交後導向到結果部分，其路由指定之路徑名稱 url。如果是其他非指定的路由或非 POST 方式都導向到 404 頁面去。先規劃 <code>form.html</code> 並放入指定目錄 plubic 內。</p>
<figure class="highlight html"><figcaption><span>form.html</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/url&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    your name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    password: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;send&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>接著設計 node 應用，這裡多引用 <code>require(&#39;querystring&#39;)</code> 能幫助我們將表單資料（為二進位資料，需進行 toString 才能變成文字串資料）轉換成 JSON 格式。</p>
<figure class="highlight javascript"><figcaption><span>webRouterForm</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> qs = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> pageDir = __dirname + <span class="string">&#x27;/public/&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">//進行路由轉換：將動態 URL 算出靜態檔案位置</span></span><br><span class="line">    <span class="keyword">switch</span> (request.<span class="property">url</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;/form&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">filePath</span>: pageDir + <span class="string">&#x27;form.html&#x27;</span></span><br><span class="line">        &#125;;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;/url&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">filePath</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">//為了表單處理，這裡不提供靜態檔案路徑</span></span><br><span class="line">        &#125;;</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">code</span>: <span class="number">404</span>,</span><br><span class="line">          <span class="attr">filePath</span>: pageDir + <span class="string">&#x27;page404.html&#x27;</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;();　<span class="comment">//直接執行獲得物件資料</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (result.<span class="property">filePath</span> != <span class="string">&#x27;&#x27;</span>) &#123; <span class="comment">//代表為靜態檔案需求</span></span><br><span class="line">    fs.<span class="title function_">readFile</span>(result.<span class="property">filePath</span>, <span class="keyword">function</span> (<span class="params">err, content</span>) &#123;</span><br><span class="line">      response.<span class="title function_">writeHead</span>(result.<span class="property">code</span>, &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span> &#125;); <span class="comment">//設定 response HEAD</span></span><br><span class="line">      <span class="keyword">if</span> (!err) response.<span class="title function_">end</span>(content);</span><br><span class="line">      <span class="keyword">else</span> response.<span class="title function_">end</span>(pageDir + <span class="string">&#x27;page404.html&#x27;</span>); <span class="comment">//如果檔案讀取失敗直接顯示 404 檔案</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">//代表做表單處理</span></span><br><span class="line">    <span class="keyword">if</span> (request.<span class="property">method</span> == <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> body = <span class="literal">null</span>;</span><br><span class="line">      request.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span> (<span class="params">content</span>) &#123; <span class="comment">//data 事件，將資料 content 進行處理</span></span><br><span class="line">        body = qs.<span class="title function_">parse</span>(content.<span class="title function_">toString</span>()); <span class="comment">//content 本身是二進位，因此需要先轉成字串。接著透過 qs.parse() 能幫 name1=value1&amp;name2=value2 轉換成 &#123;name1:value1,name:value2&#125;</span></span><br><span class="line">      &#125;);</span><br><span class="line">      request.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">//end 事件，請求完畢後進行回應畫面之生成</span></span><br><span class="line">        response.<span class="title function_">writeHead</span>(result.<span class="property">code</span>, &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span> &#125;);</span><br><span class="line">        response.<span class="title function_">write</span>(<span class="string">`</span></span><br><span class="line"><span class="string">          &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">          &lt;head&gt;</span></span><br><span class="line"><span class="string">            &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;title&gt;Test HTML&lt;/title&gt;</span></span><br><span class="line"><span class="string">          &lt;/head&gt;</span></span><br><span class="line"><span class="string">          &lt;body&gt;</span></span><br><span class="line"><span class="string">            &lt;h1&gt;Hi <span class="subst">$&#123;body.name&#125;</span>! Nice to meet you.&lt;/h1&gt;</span></span><br><span class="line"><span class="string">            &lt;h2&gt;Your Password is <span class="subst">$&#123;body.pwd&#125;</span>&lt;/h2&gt;</span></span><br><span class="line"><span class="string">          &lt;/body&gt;</span></span><br><span class="line"><span class="string">          &lt;/html&gt;</span></span><br><span class="line"><span class="string">        `</span>);</span><br><span class="line">        response.<span class="title function_">end</span>();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> response.<span class="title function_">end</span>(pageDir + <span class="string">&#x27;page404.html&#x27;</span>); <span class="comment">//如果不是 POST 方式傳送則顯示 404</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">3333</span>, <span class="string">&quot;127.0.0.1&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server running!!</span></span><br><span class="line"><span class="string">    try http://127.0.0.1:3333/form/ and Submit</span></span><br><span class="line"><span class="string">  `</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Express-js"><a href="#Express-js" class="headerlink" title="Express.js"></a>Express.js</h2><p>Express 是一個知名常用的網路應用程式開發框架，提供開發者更快有效建立 Web 應用程式且支援 MVC 架構。提供應用程式與 Web 之間完整的路由與中介軟體。</p>
<h3 id="初次安裝"><a href="#初次安裝" class="headerlink" title="初次安裝"></a>初次安裝</h3><p>跟隨 <a target="_blank" rel="noopener" href="https://expressjs.com/zh-tw/starter/installing.html">Express 官方手冊教學</a>，我們試著從 npm 方式創造一個應用程式。</p>
<ol>
<li>於既定目錄下執行 npm init 初始化並填寫基本資訊，利用 init 來協助建立 package.json，過程中的參數事項可自行評估填寫或略過。</li>
<li>將 express 相依安裝到專案目錄。另外可添加 <code>--save</code> 參數進行安裝，這能幫我們自動安裝相依關係清單中的模組。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">L</span>:\nodeDemo&gt;npm init</span><br><span class="line"><span class="title class_">This</span> utility will walk you through creating a package.<span class="property">json</span> file.</span><br><span class="line"><span class="title class_">It</span> only covers the most common items, and tries to guess sensible defaults.</span><br><span class="line"></span><br><span class="line"><span class="title class_">See</span> <span class="string">`npm help init`</span> <span class="keyword">for</span> definitive documentation on these fields</span><br><span class="line">and exactly what they <span class="keyword">do</span>.</span><br><span class="line"></span><br><span class="line"><span class="title class_">Use</span> <span class="string">`npm install &lt;pkg&gt;`</span> afterwards to install a package and</span><br><span class="line">save it <span class="keyword">as</span> a dependency <span class="keyword">in</span> the package.<span class="property">json</span> file.</span><br><span class="line"></span><br><span class="line"><span class="title class_">Press</span> ^C at any time to quit.</span><br><span class="line">package <span class="attr">name</span>: (nodedemo)</span><br><span class="line"><span class="attr">version</span>: (<span class="number">1.0</span><span class="number">.0</span>)</span><br><span class="line"><span class="attr">description</span>: my first express app</span><br><span class="line">entry <span class="attr">point</span>: (index.<span class="property">js</span>)</span><br><span class="line">test <span class="attr">command</span>:</span><br><span class="line">git <span class="attr">repository</span>:</span><br><span class="line"><span class="attr">keywords</span>: study</span><br><span class="line"><span class="attr">author</span>: <span class="title class_">Loki</span> <span class="title class_">Jiang</span></span><br><span class="line"><span class="attr">license</span>: (<span class="variable constant_">ISC</span>)</span><br><span class="line"><span class="title class_">About</span> to write to <span class="attr">L</span>:\nodeDemo\package.<span class="property">json</span>:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;nodedemo&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;my first express app&quot;</span>,</span><br><span class="line">  <span class="string">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;keywords&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;study&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;author&quot;</span>: <span class="string">&quot;Loki Jiang&quot;</span>,</span><br><span class="line">  <span class="string">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Is</span> <span class="variable language_">this</span> <span class="variable constant_">OK</span>? (yes)</span><br><span class="line"></span><br><span class="line"><span class="attr">L</span>:\nodeDemo&gt;npm install express --save</span><br><span class="line">npm notice created a lockfile <span class="keyword">as</span> package-lock.<span class="property">json</span>. <span class="title class_">You</span> should commit <span class="variable language_">this</span> file.</span><br><span class="line">npm <span class="variable constant_">WARN</span> nodedemo@<span class="number">1.0</span><span class="number">.0</span> <span class="title class_">No</span> repository field.</span><br><span class="line"></span><br><span class="line">+ express@<span class="number">4.17</span><span class="number">.1</span></span><br><span class="line">added <span class="number">50</span> packages <span class="keyword">from</span> <span class="number">37</span> contributors and audited <span class="number">50</span> packages <span class="keyword">in</span> <span class="number">24.</span>638s</span><br><span class="line">found <span class="number">0</span> vulnerabilities</span><br><span class="line"></span><br><span class="line"><span class="attr">L</span>:\nodeDemo&gt;</span><br></pre></td></tr></table></figure>

<h3 id="初始運作與掛載靜態目錄"><a href="#初始運作與掛載靜態目錄" class="headerlink" title="初始運作與掛載靜態目錄"></a>初始運作與掛載靜態目錄</h3><p>這裡試著用 express 產生一個可服務的 Node Web 運作，而 express 提供內建的中介軟體函式 <code>express.static</code> 來設定靜態路由，這能方便你掛載一些媒體檔案或網頁目錄。</p>
<ol>
<li>規劃練習檔案路徑為 <code>/formDir/post.html</code>, <code>/formDir/delete.html</code>, <code>/public/index.html</code>，內容隨意輸入能判別即可。</li>
<li>規劃以下 index.js 檔案，並於終端機輸入 <code>node .</code> 或 <code>node ./</code> 即可執行嘗試並指定 URL 測試。這裡不用檔名是因為 index.js 命名技巧關係。</li>
</ol>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 設定靜態目錄</span></span><br><span class="line"><span class="comment">多個目錄掛載可多筆設定</span></span><br><span class="line"><span class="comment">亦可產生虛擬的目錄位置</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;public&#x27;</span>)); <span class="comment">//掛載靜態目錄 public 為 路由根目錄</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/form&#x27;</span>, express.<span class="title function_">static</span>(<span class="string">&#x27;formDir&#x27;</span>)); <span class="comment">//掛載靜態目錄 formDir 為路由另名目錄 form</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`try URL</span></span><br><span class="line"><span class="string">    http://127.0.0.1:3000/ (it&#x27;s in plubic/index.html)</span></span><br><span class="line"><span class="string">    http://127.0.0.1:3000/form/post.html (it&#x27;s in formDir/post.html)</span></span><br><span class="line"><span class="string">    http://127.0.0.1:3000/form/delete.html (it&#x27;s in formDir/delete.html)</span></span><br><span class="line"><span class="string">  `</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="何謂-MVC"><a href="#何謂-MVC" class="headerlink" title="何謂 MVC"></a>何謂 MVC</h3><p>MVC 是一個設計上的物件導向模式之架構，並不是一個技術規範。將系統架構分類出 Model 資料模型、View 使用介面、Controller 控制邏輯三大核心元件。能很常的在一些 Web Applications 應用上被看到廣泛使用。</p>
<div class="note danger"><p><strong>Web 開發之類型</strong></p>
<ul>
<li>web Application<br>在 Web 開發領域內我們稱呼為 Web 應用，藉由使用者的 HTTP 請求內容，透過相關邏輯處理，在伺服器端生成使用者所需的資料畫面形成互動。像是常逛的網站都是這類型 Web 開發，譬如購物網站、網路銀行、拍賣、會員商務網站等。</li>
<li>web Services<br>在 Web 開發領域內還有另一種稱呼為 Web 服務類型，透過 SOAP 協定或 RESTful API 方式進行資料交換，其實 Web 服務也是一種 Web 應用，只差在通常不是對直接對消費者的應用互動。像是 Google API、Ficker API、OpenData 等。</li>
</ul>
</div>

<p>在開發 Web 應用時，傳統方式是從輸入、處理、輸出的步驟來完成互動設計。而 MVC 則是反將這些步驟拆解成三種元件，每當使用者使用瀏覽器提出 HTTP 請求時，由 Controller 收到請求進行執行動作，也就是控制 Model 與 View 的變化，而 Model 元件會負責將資料準備好使得 View 能順利生成 HTTP 回應。如圖所示：</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Router-MVC-DB.svg" alt="MVC 圖示說明"></p>
<ul>
<li>Model 資料模型<br>主要負責 Web 應用的資料存取與處理規則，也就是存取至資料庫、fs 檔案、XML 等相關資料。</li>
<li>View 使用介面<br>展示邏輯的物件，也就是建立使用者的瀏覽執行資訊，而 HTTP 回應的資訊通常是 HTML 網頁。View 元件會透過 Mode 元件來取得資料並將資料轉換成給使用者的畫面資訊。</li>
<li>Controller 控制邏輯<br>整個 Web 應用的中心處，負責跟 view 跟 Model 元件之間的協調與控制執行，例如在獲得使用者的 HTTP 請求處理就屬於 Controller 控制器範圍內，根據所需操作去控制 Model 來存取資料，然後送至 View 進行畫面所需的 HTML 網頁。</li>
</ul>
<h3 id="應用程式產生器"><a href="#應用程式產生器" class="headerlink" title="應用程式產生器"></a>應用程式產生器</h3><p>Express 提供一個需安裝的 <a target="_blank" rel="noopener" href="https://expressjs.com/zh-tw/starter/generator.html">產生器</a> 能協助幫忙快速建立應用程式所需要的基本框架結構，透過該步驟協助能快速建立一個 Web 應用開發。</p>
<div class="note default"><p>使用產生器來建立應用程式結構，只是多種用來建立 Express 應用程式結構的其中一種方式。您有權使用這種結構，或是加以修改盡量符合您的需求。</p>
</div>

<h4 id="安裝-1"><a href="#安裝-1" class="headerlink" title="安裝"></a>安裝</h4><p>透過指令 <code>express-generator -g</code>進行全域安裝（必要）。Express Generator 與前面介紹的 Express 不同的是，Express 可透過區域安裝方式再自行 require 載入使用，而 Express Generator 是直接全域安裝並透過指令輸入<code>express &lt;APP_NAME&gt;</code>即可產生具備 MVC 架構的 APP 初始環境。因此選擇 Express Generator 來初始化應用即可，不用預先安裝 Express 到區域或全域上。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;npm install express-generator -g</span><br><span class="line">npm WARN deprecated mkdirp@0.5.1: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)        </span><br><span class="line">K:\VSCODE\data\user-data\User\lokiTools\nvs\node\14.15.3\x64\express -&gt; K:\VSCODE\data\user-data\User\lokiTools\nvs\node\14.15.3\x64\node_modules\express-generator\bin\express-cli.js   </span><br><span class="line">+ express-generator@4.16.1</span><br><span class="line">added 10 packages from 13 contributors in 2.255s</span><br></pre></td></tr></table></figure>

<h4 id="初始化應用"><a href="#初始化應用" class="headerlink" title="初始化應用"></a>初始化應用</h4><p>由於現在已經有全域指令 express 能使用，直接在目前工作目錄上建立一個名為 lokiApp 的 Express 應用程式：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;express lokiApp</span><br><span class="line"></span><br><span class="line">  warning: the default view engine will not be jade in future releases</span><br><span class="line">  warning: use `--view=jade&#x27; or `--help&#x27; for additional options</span><br><span class="line"></span><br><span class="line">   create : lokiApp\</span><br><span class="line">   create : lokiApp\public\</span><br><span class="line">   create : lokiApp\public\javascripts\</span><br><span class="line">   create : lokiApp\public\images\</span><br><span class="line">   create : lokiApp\public\stylesheets\</span><br><span class="line">   create : lokiApp\public\stylesheets\style.css</span><br><span class="line">   create : lokiApp\routes\</span><br><span class="line">   create : lokiApp\routes\index.js</span><br><span class="line">   create : lokiApp\routes\users.js</span><br><span class="line">   create : lokiApp\views\</span><br><span class="line">   create : lokiApp\views\error.jade</span><br><span class="line">   create : lokiApp\views\index.jade</span><br><span class="line">   create : lokiApp\views\layout.jade</span><br><span class="line">   create : lokiApp\app.js</span><br><span class="line">   create : lokiApp\package.json</span><br><span class="line">   create : lokiApp\bin\</span><br><span class="line">   create : lokiApp\bin\www</span><br><span class="line"></span><br><span class="line">   change directory:</span><br><span class="line">     &gt; cd lokiApp</span><br><span class="line"></span><br><span class="line">   install dependencies:</span><br><span class="line">     &gt; npm install</span><br><span class="line"></span><br><span class="line">   run the app:</span><br><span class="line">     &gt; SET DEBUG=lokiapp:* &amp; npm start</span><br></pre></td></tr></table></figure>
<p>到現在你已經獲得一個應用程式目錄同時該目錄持有完整的 MVC 架構。接著根據提示我們需要轉到應用程式的目錄下，將所需要的相依模組安裝起來（將會自動生成 node_moudle 目錄與相關檔案）。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;cd lokiApp</span><br><span class="line"></span><br><span class="line">L:\nodeDemo\lokiApp&gt;npm install</span><br><span class="line">npm WARN deprecated jade@1.11.0: Jade has been renamed to pug, please install the latest version of pug instead of jade</span><br><span class="line">npm WARN deprecated constantinople@3.0.2: Please update to at least constantinople 3.1.1</span><br><span class="line">npm WARN deprecated transformers@2.1.0: Deprecated, use jstransformer</span><br><span class="line">npm notice created a lockfile as package-lock.json. You should commit this file.</span><br><span class="line">added 100 packages from 139 contributors and audited 101 packages in 75.152s</span><br><span class="line">found 4 vulnerabilities (3 low, 1 critical)</span><br><span class="line">  run `npm audit fix` to fix them, or `npm audit` for details</span><br></pre></td></tr></table></figure>
<p>最後，你可以試著執行 Web 服務起來。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">L:\nodeDemo\lokiApp&gt;SET DEBUG=lokiapp:* &amp; npm start</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">lokiapp@0.0.0 start L:\nodeDemo\lokiApp</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">node ./bin/www</span></span><br><span class="line"></span><br><span class="line">  lokiapp:server Listening on port 3000 +0ms</span><br><span class="line">GET / 200 523.280 ms - 170</span><br><span class="line">GET /stylesheets/style.css 200 4.047 ms - 111</span><br><span class="line">GET /favicon.ico 404 12.350 ms - 1012</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/jN6BO0j.png" alt="Image"></p>
<h4 id="結構說明"><a href="#結構說明" class="headerlink" title="結構說明"></a>結構說明</h4><p>現有資料上上可以分為三個重要目錄：</p>
<ul>
<li>public：放置靜態 HTML5、CSS、JS 檔案。路由已經設定好，任何放入此目錄下的檔案都能直接對應網址上使用。譬如 <code>plubic/test.html</code>　的 URL 位置為 <code>http://127.0.0.1:3000/test.html</code>。<br><img src="https://i.imgur.com/JsnCLNK.png" alt="Image"></li>
<li>routes：路由模組</li>
<li>views：MVC 的 View 目錄，由於是 Jade 樣板引擎所以副檔名皆為 <code>.jade</code>，預設會提供 error.jade, index.jade, layout.jade 三個樣板檔案</li>
</ul>
<p>以及兩個重要檔案：</p>
<ul>
<li>app.js：用於 Express.js 運作 Web 的核心檔案。主要是將 Expres 相關環境連結搞定。以下附上註解部分說明。<figure class="highlight javascript"><figcaption><span>app.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> createError = <span class="built_in">require</span>(<span class="string">&#x27;http-errors&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>); <span class="comment">//載入 Expres 模組</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> cookieParser = <span class="built_in">require</span>(<span class="string">&#x27;cookie-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> logger = <span class="built_in">require</span>(<span class="string">&#x27;morgan&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//載入路由目錄下的 index.js 與 users.js，作為新增路由使用</span></span><br><span class="line"><span class="keyword">var</span> indexRouter = <span class="built_in">require</span>(<span class="string">&#x27;./routes/index&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> usersRouter = <span class="built_in">require</span>(<span class="string">&#x27;./routes/users&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();<span class="comment">//透過 app 拿來控制 Express 進行 set 與 use 相關設定。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// view engine setup</span></span><br><span class="line"><span class="comment">//設定 VIEW 樣板位置與引擎格式</span></span><br><span class="line">app.<span class="title function_">set</span>(<span class="string">&#x27;views&#x27;</span>, path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;views&#x27;</span>));</span><br><span class="line">app.<span class="title function_">set</span>(<span class="string">&#x27;view engine&#x27;</span>, <span class="string">&#x27;jade&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//透過 use 來開啟網站功能，像是網站記錄、欄位資料分析等。</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">logger</span>(<span class="string">&#x27;dev&#x27;</span>));</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cookieParser</span>());</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;public&#x27;</span>))); <span class="comment">//指定靜態目錄位置為 public</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//套用路由到 Express 網站的應用程式內</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/&#x27;</span>, indexRouter);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/users&#x27;</span>, usersRouter);</span><br><span class="line"></span><br><span class="line"><span class="comment">// catch 404 and forward to error handler</span></span><br><span class="line"><span class="comment">//處理 404 沒有找到的錯誤</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  <span class="title function_">next</span>(<span class="title function_">createError</span>(<span class="number">404</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// error handler</span></span><br><span class="line"><span class="comment">//進行相關錯誤的處理過程</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">err, req, res, next</span>) &#123;</span><br><span class="line">  <span class="comment">// set locals, only providing error in development</span></span><br><span class="line">  res.<span class="property">locals</span>.<span class="property">message</span> = err.<span class="property">message</span>;</span><br><span class="line">  res.<span class="property">locals</span>.<span class="property">error</span> = req.<span class="property">app</span>.<span class="title function_">get</span>(<span class="string">&#x27;env&#x27;</span>) === <span class="string">&#x27;development&#x27;</span> ? err : &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// render the error page</span></span><br><span class="line">  res.<span class="title function_">status</span>(err.<span class="property">status</span> || <span class="number">500</span>);</span><br><span class="line">  res.<span class="title function_">render</span>(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//最後使用 export 方式匯出整個 Express 物件的變數 app</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = app;</span><br></pre></td></tr></table></figure></li>
<li>package.json：相關定義檔案，包含版本號、資訊相依模組內容等。</li>
<li>bin&#x2F;www：建立 Web 服務的核心檔案，而預設埠 3000 也是在此設定。<figure class="highlight javascript"><figcaption><span>bin/www</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> port = <span class="title function_">normalizePort</span>(process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="string">&#x27;3000&#x27;</span>); <span class="comment">//預設 port 號</span></span><br><span class="line">app.<span class="title function_">set</span>(<span class="string">&#x27;port&#x27;</span>, port);</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="手動添加路由與-View-網頁"><a href="#手動添加路由與-View-網頁" class="headerlink" title="手動添加路由與 View 網頁"></a>手動添加路由與 View 網頁</h4><p>這裡我們將示範如何手動添加路由與 Jade 樣板引擎的 MVC 規劃的 View 頁面。首先需要對 <code>app.js</code> 進行載入路由與新增路由。</p>
<figure class="highlight javascript"><figcaption><span>app.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> indexRouter = <span class="built_in">require</span>(<span class="string">&#x27;./routes/index&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> usersRouter = <span class="built_in">require</span>(<span class="string">&#x27;./routes/users&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> customRouter=<span class="built_in">require</span>(<span class="string">&#x27;./routes/custom&#x27;</span>); <span class="comment">//custom Route require</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/&#x27;</span>, indexRouter);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/users&#x27;</span>, usersRouter);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/custom&#x27;</span>, customRouter); <span class="comment">// custom Route add</span></span><br></pre></td></tr></table></figure>
<p>接著設計我們的 <code>routes/custom.js</code> 檔案（可以拿 index.js 來改）。</p>
<figure class="highlight javascript"><figcaption><span>custom.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* GET custom page. */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">透過 router.get() 的 GET 方法取得網頁</span></span><br><span class="line"><span class="comment">而 res.render() 能產生 response 生成網頁</span></span><br><span class="line"><span class="comment">- 由於是 Jade 引擎所以第一個參數需指定樣板檔案名稱（也就是檔案為 views/lokiJade)</span></span><br><span class="line"><span class="comment">- 第二個參數為該 response 之參數物件，這裡示範提供網頁標題</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  res.<span class="title function_">render</span>(<span class="string">&#x27;lokiJade&#x27;</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;My Custom Test&#x27;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//最後進行 Export 匯出</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router;</span><br></pre></td></tr></table></figure>
<p>再來到 MVC 結構的 views 目錄新增 Jade 樣板。這裡我們要對應正確名稱 <code>lokiJade.jade</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">extends layout</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">  h1= title</span><br><span class="line">  p Welcome to #&#123;title&#125;</span><br><span class="line">  div 這是用 JADE 語法寫出來的樣板網頁唷</span><br></pre></td></tr></table></figure>
<p>JADE 可以分為兩大區域：</p>
<ul>
<li><code>extend layout</code>：能幫忙擴展同目錄下 layout.jade 檔案。譬如 layout.jade 的內容就是常用的 html 宣告。<figure class="highlight plaintext"><figcaption><span>layout.jade</span></figcaption><table><tr><td class="code"><pre><span class="line">doctype html</span><br><span class="line">html</span><br><span class="line">  head</span><br><span class="line">    title= title</span><br><span class="line">    link(rel=&#x27;stylesheet&#x27;, href=&#x27;/stylesheets/style.css&#x27;)</span><br><span class="line">  body</span><br><span class="line">    block content</span><br></pre></td></tr></table></figure></li>
<li><code>block content</code>：為區塊替換，也就是 <code>layout.jade</code>與 <code>lokiJade.jade</code> 的 block content 形成內容。</li>
</ul>
<p>Jade 語法簡介：</p>
<ol>
<li><code>=var</code> 符號為完整指定參數之內容，也就是可指定上一步驟的 response 參數物件。如果是在某字串內替換則使用<code>#&#123;var&#125;</code>方式來替換。</li>
<li>HTML 標籤指名稱沒有<code>&lt;&gt;</code>，如需指定 attr 屬性寫法為<code>(key1=val1,key2=val2)</code>，例如 <code>a(style=&quot;color:red;font-size:2rem&quot;,href=&quot;/index&quot;)</code>。</li>
<li>指定 id 方式為 <code>div#id</code>，指定 class 方式為 <code>div.class</code> 即可，如此直白。</li>
</ol>
<h4 id="檢查畫面結果"><a href="#檢查畫面結果" class="headerlink" title="檢查畫面結果"></a>檢查畫面結果</h4><p>最後，我們可試著重新執行一次 <kbd>Ctrl+C</kbd>，這次可嘗試不添加 SET DEBUG 直接輸入指令。並測試網址畫面 <code>http://127.0.0.1:3000/custom</code> 是否成功。</p>
<figure class="highlight shell"><figcaption><span>cmd</span></figcaption><table><tr><td class="code"><pre><span class="line">L:\nodeDemo\lokiApp&gt;npm start</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">lokiapp@0.0.0 start L:\nodeDemo\lokiApp</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">node ./bin/www</span></span><br></pre></td></tr></table></figure>

<p>當用戶瀏覽該網址時，Node.js 端的 Console 會看見相關 GET 動作，包含我們的路由目錄以及 CSS 樣式表。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">GET /custom 304 184.458 ms - -</span><br><span class="line">GET /stylesheets/style.css 304 1.382 ms - -</span><br></pre></td></tr></table></figure>

<h3 id="與-MySQL-連線"><a href="#與-MySQL-連線" class="headerlink" title="與 MySQL 連線"></a>與 MySQL 連線</h3><p>Express 扮演伺服器角色時，我們能跟各種 <a target="_blank" rel="noopener" href="https://expressjs.com/zh-tw/guide/database-integration.html#mysql">資料庫</a> 進行連線整合。舉例來說，在伺服器端安裝 MySQL 服務（這裡採 WINDOWS XAMPP 做簡單示範）並嘗試安裝模組進行連結。</p>
<p>事前準備 SQL，將以下 SQL 建立準備完畢，將獲得資料庫名為 node_sample 並持有 animal 資料表：</p>
<figure class="highlight sql"><figcaption><span>db.sql</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> SQL_MODE <span class="operator">=</span> &quot;NO_AUTO_VALUE_ON_ZERO&quot;;</span><br><span class="line"><span class="keyword">SET</span> AUTOCOMMIT <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="keyword">SET</span> time_zone <span class="operator">=</span> &quot;+00:00&quot;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `node_sample` <span class="keyword">DEFAULT</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci;</span><br><span class="line">USE `node_sample`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `animal` (</span><br><span class="line">  `id` <span class="type">smallint</span>(<span class="number">5</span>) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` text <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `weight` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `info` text <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `<span class="type">date</span>` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `animal` (`id`, `name`, `weight`, `info`, `<span class="type">date</span>`) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;藪貓&#x27;</span>, <span class="number">9</span>, <span class="string">&#x27;食肉目 貓科 藪貓屬&#x27;</span>, <span class="string">&#x27;2020-12-20 08:21:08&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;耳廓狐&#x27;</span>, <span class="number">17</span>, <span class="string">&#x27;食肉目 犬科 狐屬&#x27;</span>, <span class="string">&#x27;2020-12-19 15:57:56&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;河馬&#x27;</span>, <span class="number">120</span>, <span class="string">&#x27;鯨偶蹄目 河馬科 河馬屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;印度象&#x27;</span>, <span class="number">1258</span>, <span class="string">&#x27;長鼻目 象科 象屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="string">&#x27;浣熊&#x27;</span>, <span class="number">30</span>, <span class="string">&#x27;食肉目 浣熊科 浣熊屬&#x27;</span>, <span class="string">&#x27;2020-11-07 09:13:58&#x27;</span>),</span><br><span class="line">(<span class="number">6</span>, <span class="string">&#x27;斑馬&#x27;</span>, <span class="number">53</span>, <span class="string">&#x27;奇蹄目 馬科 馬屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">7</span>, <span class="string">&#x27;瞪羚&#x27;</span>, <span class="number">32</span>, <span class="string">&#x27;鯨偶蹄目 牛科 瞪羚屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">8</span>, <span class="string">&#x27;土狼&#x27;</span>, <span class="number">32</span>, <span class="string">&#x27;食肉目 鬣狗科 土狼屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">9</span>, <span class="string">&#x27;水獺&#x27;</span>, <span class="number">32</span>, <span class="string">&#x27;食肉目 鼬科 小爪水獺屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">10</span>, <span class="string">&#x27;美洲豹&#x27;</span>, <span class="number">999999</span>, <span class="string">&#x27;食肉目 貓科 豹屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">11</span>, <span class="string">&#x27;山貓&#x27;</span>, <span class="number">999999999</span>, <span class="string">&#x27;食肉目 貓科 虎貓屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">12</span>, <span class="string">&#x27;馬來貘&#x27;</span>, <span class="number">80</span>, <span class="string">&#x27;奇蹄目 貘科 貘屬&#x27;</span>, <span class="string">&#x27;2020-11-07 09:13:33&#x27;</span>),</span><br><span class="line">(<span class="number">13</span>, <span class="string">&#x27;馬島獴&#x27;</span>, <span class="number">17</span>, <span class="string">&#x27;食肉目 食蟻狸科 馬島獴屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">14</span>, <span class="string">&#x27;花鹿&#x27;</span>, <span class="number">120</span>, <span class="string">&#x27;鯨偶蹄目 鹿科 花鹿屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">15</span>, <span class="string">&#x27;眼鏡王蛇&#x27;</span>, <span class="number">1258</span>, <span class="string">&#x27;有鱗目 眼鏡蛇科 眼鏡王蛇屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">16</span>, <span class="string">&#x27;食蟻獸&#x27;</span>, <span class="number">40</span>, <span class="string">&#x27;披毛目 食蟻獸科 小食蟻獸屬&#x27;</span>, <span class="string">&#x27;2020-11-07 09:13:58&#x27;</span>),</span><br><span class="line">(<span class="number">17</span>, <span class="string">&#x27;孔雀&#x27;</span>, <span class="number">532</span>, <span class="string">&#x27;雞形目 雉科 孔雀屬&#x27;</span>, <span class="string">&#x27;2020-11-07 10:54:58&#x27;</span>),</span><br><span class="line">(<span class="number">18</span>, <span class="string">&#x27;袋獾&#x27;</span>, <span class="number">32</span>, <span class="string">&#x27;袋鼬目 袋鼬科 袋獾屬&#x27;</span>, <span class="string">&#x27;2020-11-07 10:55:05&#x27;</span>),</span><br><span class="line">(<span class="number">19</span>, <span class="string">&#x27;傘蜥蜴&#x27;</span>, <span class="number">555</span>, <span class="string">&#x27;有鱗目 飛蜥科 傘蜥蜴屬&#x27;</span>, <span class="string">&#x27;2020-11-07 10:55:26&#x27;</span>),</span><br><span class="line">(<span class="number">20</span>, <span class="string">&#x27;朱䴉&#x27;</span>, <span class="number">32</span>, <span class="string">&#x27;鵜形目 䴉科 朱䴉屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">21</span>, <span class="string">&#x27;羊駝&#x27;</span>, <span class="number">999999</span>, <span class="string">&#x27;鯨偶蹄目 駱駝科 小羊駝屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">22</span>, <span class="string">&#x27;美洲紅䴉&#x27;</span>, <span class="number">55</span>, <span class="string">&#x27;鵜形目 䴉科 美洲䴉屬&#x27;</span>, <span class="string">&#x27;2020-11-07 09:22:04&#x27;</span>),</span><br><span class="line">(<span class="number">23</span>, <span class="string">&#x27;美洲河狸&#x27;</span>, <span class="number">55</span>, <span class="string">&#x27;嚙齒目 河狸科 河狸屬&#x27;</span>, <span class="string">&#x27;2020-11-07 09:24:31&#x27;</span>),</span><br><span class="line">(<span class="number">24</span>, <span class="string">&#x27;黑尾土撥鼠&#x27;</span>, <span class="number">999999999</span>, <span class="string">&#x27;嚙齒目 松鼠科 草原犬鼠屬&#x27;</span>, <span class="string">&#x27;2020-11-07 08:52:06&#x27;</span>),</span><br><span class="line">(<span class="number">25</span>, <span class="string">&#x27;獅子&#x27;</span>, <span class="number">55</span>, <span class="string">&#x27;食肉目 貓科 豹屬&#x27;</span>, <span class="string">&#x27;2020-12-20 09:38:19&#x27;</span>),</span><br><span class="line">(<span class="number">26</span>, <span class="string">&#x27;原牛&#x27;</span>, <span class="number">120</span>, <span class="string">&#x27;鯨偶蹄目 牛科 牛屬&#x27;</span>, <span class="string">&#x27;2020-12-20 09:39:03&#x27;</span>),</span><br><span class="line">(<span class="number">27</span>, <span class="string">&#x27;阿拉伯大羚羊&#x27;</span>, <span class="number">2223</span>, <span class="string">&#x27;鯨偶蹄目 牛科 長角羚屬&#x27;</span>, <span class="string">&#x27;2020-12-20 09:40:53&#x27;</span>),</span><br><span class="line">(<span class="number">28</span>, <span class="string">&#x27;日本黑熊&#x27;</span>, <span class="number">222</span>, <span class="string">&#x27;食肉目 熊科 熊屬&#x27;</span>, <span class="string">&#x27;2020-12-20 09:49:00&#x27;</span>),</span><br><span class="line">(<span class="number">29</span>, <span class="string">&#x27;駝鹿&#x27;</span>, <span class="number">22</span>, <span class="string">&#x27;鯨偶蹄目 鹿科 駝鹿屬&#x27;</span>, <span class="string">&#x27;2020-12-20 09:50:23&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `animal`</span><br><span class="line">  <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (`id`);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `animal`</span><br><span class="line">  MODIFY `id` <span class="type">smallint</span>(<span class="number">5</span>) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT, AUTO_INCREMENT<span class="operator">=</span><span class="number">30</span>;</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>

<p>接著為了與 MySQL 連結我們需要安裝 mysql 模組，進行全域安裝後嘗試簡單使用 test.js 來進行測試。</p>
<figure class="highlight javascript"><figcaption><span>test.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> connection = mysql.<span class="title function_">createConnection</span>(&#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;node_sample&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line">connection.<span class="title function_">connect</span>();</span><br><span class="line">connection.<span class="title function_">query</span>(<span class="string">&#x27;SELECT * FROM animal&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, rows, fields</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sql content fail!!&quot;</span>);</span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;The data is: &#x27;</span>, rows);</span><br><span class="line">&#125;);</span><br><span class="line">connection.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure>
<p>接著指定路徑到檔案位置，直接透過 node 來執行該 js 應用程式（不是 Express 應用）。</p>
<figure class="highlight shell"><figcaption><span>cmd</span></figcaption><table><tr><td class="code"><pre><span class="line">L:\nodeDemo&gt;node test.js</span><br><span class="line">The data is:  [</span><br><span class="line">  RowDataPacket &#123;</span><br><span class="line">    id: 1,</span><br><span class="line">    name: &#x27;藪貓&#x27;,</span><br><span class="line">    weight: 9,</span><br><span class="line">    info: &#x27;食肉目 貓科 藪貓屬&#x27;,</span><br><span class="line">    date: 2020-12-20T00:21:08.000Z</span><br><span class="line">  &#125;,</span><br><span class="line">  RowDataPacket &#123;</span><br><span class="line">    id: 2,</span><br><span class="line">    name: &#x27;耳廓狐&#x27;,</span><br><span class="line">    weight: 17,</span><br><span class="line">    info: &#x27;食肉目 犬科 狐屬&#x27;,</span><br><span class="line">    date: 2020-12-19T07:57:56.000Z</span><br><span class="line">  &#125;</span><br><span class="line">  //...（略）</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h4 id="Express-內使用-SELECT"><a href="#Express-內使用-SELECT" class="headerlink" title="Express 內使用 SELECT"></a>Express 內使用 SELECT</h4><p>沿用之前的 lokiApp 應用，我們將規劃一個路由作為顯示資料庫 SELECT 結果，並透過 jade 進行模板輸出。同樣的在那之前 mysql 模組已全域安裝完成。步驟修改處相同流程，先至 app.js 進行添加路由位置，未來只要網址輸入 <code>/animal</code> 則將指向到 <code>/routes/animal</code> 執行內容。</p>
<figure class="highlight javascript"><figcaption><span>app.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> animalRouter=<span class="built_in">require</span>(<span class="string">&#x27;./routes/animal&#x27;</span>); <span class="comment">/////////////////////////////custom SQL SELECT</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/animal&#x27;</span>, animalRouter); <span class="comment">// custom Route add</span></span><br></pre></td></tr></table></figure>

<p>接著到 routes 目錄新增 animal.js 進行應用程式編寫，每當有人到達指定 URL 請求時進行以下作業：</p>
<figure class="highlight javascript"><figcaption><span>animal.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"><span class="keyword">var</span> content = <span class="built_in">require</span>(<span class="string">&#x27;./dbContent&#x27;</span>); <span class="comment">//將 DB 連結資訊以另外的地方編寫，再匯入回傳作為變數 content 之內容，此檔案位置為相同目錄下</span></span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//執行 SQL 指令</span></span><br><span class="line">  content.<span class="title function_">query</span>(<span class="string">&#x27;SELET * FROM animal&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, rows, fields</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!err) &#123; <span class="comment">//成功 F</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(rows);</span><br><span class="line">      <span class="comment">// res.render(&#x27;lokiJade&#x27;, &#123; title: &#x27;My Custom Test&#x27; &#125;);</span></span><br><span class="line">      res.<span class="title function_">render</span>(<span class="string">&#x27;aninalJade&#x27;</span>, &#123; <span class="attr">items</span>: rows &#125;); <span class="comment">//將資料以 items 變數方式傳送給 JADE</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">throw</span> err; <span class="comment">//失敗</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//最後進行 Export 匯出</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>dbContent.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">export</span> = mysql.<span class="title function_">createConnection</span>(&#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;node_sample&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>由於 response 的 render 作業會去取得 <code>animalJade.jade</code>樣板並持有變數 items。因此開始規劃網頁畫面結果：</p>
<figure class="highlight plaintext"><figcaption><span>animalJade.jade</span></figcaption><table><tr><td class="code"><pre><span class="line">extends layout</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">  table(border=&#x27;1&#x27;,style=&#x27;width:100%&#x27;)</span><br><span class="line">    thead</span><br><span class="line">      tr</span><br><span class="line">        th ID</span><br><span class="line">        th 名稱</span><br><span class="line">        th 重量</span><br><span class="line">        th 簡介</span><br><span class="line">        th 修改日期</span><br><span class="line">    tbody</span><br><span class="line">      each item in items</span><br><span class="line">        tr</span><br><span class="line">          td=item.id</span><br><span class="line">          td=item.name</span><br><span class="line">          td=item.weight</span><br><span class="line">          td=item.info</span><br><span class="line">          td=item.date</span><br></pre></td></tr></table></figure>
<p>此時嘗試網址 <code>http://127.0.0.1:3000/animal</code> 查看網頁結果。<br><img src="https://i.imgur.com/7bqBjkB.png" alt="Image"></p>
<h1 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h1><ul>
<li><a target="_blank" rel="noopener" href="https://nodejs.org/zh-cn/docs/guides/">指南 | Node.js</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.npmjs.com/">npm Docs</a></li>
<li><a target="_blank" rel="noopener" href="http://nodejs.cn/api/">Node.js 中文网</a></li>
<li><a target="_blank" rel="noopener" href="https://expressjs.com/zh-tw/">Express - Node.js Web 應用程式架構</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
              <a href="/tags/NodeJS/" rel="tag"># NodeJS</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/12-14/article-ajax-api/" rel="prev" title="[學習之路] Ajax 的相關領域技術與應用">
                  <i class="fa fa-chevron-left"></i> [學習之路] Ajax 的相關領域技術與應用
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/02-16/bs5-class-1/" rel="next" title="[基礎課程] Bootstrap5 教學（一）：安裝、排版、內容">
                  [基礎課程] Bootstrap5 教學（一）：安裝、排版、內容 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    <span class="with-love">
      <i class="fa fa-star"></i>
    </span>
    <span class="author" itemprop="copyrightHolder" title="找我？！側單左上連結">Loki Jiang</span>
    <span class="post-meta-item-icon with-love">
      <i class="fas fa-copyright"></i>
    </span>
    2020 – 
    <span itemprop="copyrightYear">2024</span> All rights reserved.
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon with-love">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="總字數">519,958</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon with-love">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="所需總閱讀時間">15:45:23</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon with-love">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="訪客總數">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon with-love">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="總瀏覽次數">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/summer10920" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.0/mermaid.min.js","integrity":"sha256-stuqcu2FrjYCXDOytWFA5SoUE/r3nkp6gTglzNSlavU="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/fancybox.js"></script>



  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script src="https://cdnjs.cloudflare.com/ajax/libs/wordcloud2.js/1.2.2/wordcloud2.min.js"
    integrity="sha512-lGnVsh3WK0YJ7NX7rQmUu6kqF7vqELuDrUTnxpI2iD86VwI+OlQhi3EAJJZbrBUOfDFOAYAkigxkApHGM2IZTg=="
    crossorigin="anonymous"></script>
<script src="/assets/js/loki.js"></script>
</body>
</html>
